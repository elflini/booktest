<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 데이터프레임의 활용 | Insurance Claims Data Analysis with R</title>
  <meta name="description" content="This is a R manual for analysis of insurance claims data" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 데이터프레임의 활용 | Insurance Claims Data Analysis with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a R manual for analysis of insurance claims data" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 데이터프레임의 활용 | Insurance Claims Data Analysis with R" />
  
  <meta name="twitter:description" content="This is a R manual for analysis of insurance claims data" />
  

<meta name="author" content="Jin Hyun Nam" />


<meta name="date" content="2021-07-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter3.html"/>
<link rel="next" href="chapter5.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Claims Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>머리말</a></li>
<li class="chapter" data-level="1" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i><b>1</b> R이란?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter1.html"><a href="chapter1.html#r-설치"><i class="fa fa-check"></i><b>1.1</b> R 설치</a></li>
<li class="chapter" data-level="1.2" data-path="chapter1.html"><a href="chapter1.html#r-프로그램의-구성"><i class="fa fa-check"></i><b>1.2</b> R 프로그램의 구성</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chapter1.html"><a href="chapter1.html#파일"><i class="fa fa-check"></i><b>1.2.1</b> 파일</a></li>
<li class="chapter" data-level="1.2.2" data-path="chapter1.html"><a href="chapter1.html#편집"><i class="fa fa-check"></i><b>1.2.2</b> 편집</a></li>
<li class="chapter" data-level="1.2.3" data-path="chapter1.html"><a href="chapter1.html#기타"><i class="fa fa-check"></i><b>1.2.3</b> 기타</a></li>
<li class="chapter" data-level="1.2.4" data-path="chapter1.html"><a href="chapter1.html#패키지"><i class="fa fa-check"></i><b>1.2.4</b> 패키지</a></li>
<li class="chapter" data-level="1.2.5" data-path="chapter1.html"><a href="chapter1.html#윈도우즈"><i class="fa fa-check"></i><b>1.2.5</b> 윈도우즈</a></li>
<li class="chapter" data-level="1.2.6" data-path="chapter1.html"><a href="chapter1.html#도움말"><i class="fa fa-check"></i><b>1.2.6</b> 도움말</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chapter1.html"><a href="chapter1.html#r-프로그램-특징"><i class="fa fa-check"></i><b>1.3</b> R 프로그램 특징</a></li>
<li class="chapter" data-level="1.4" data-path="chapter1.html"><a href="chapter1.html#rstudio-설치"><i class="fa fa-check"></i><b>1.4</b> RStudio 설치</a></li>
<li class="chapter" data-level="1.5" data-path="chapter1.html"><a href="chapter1.html#r-패키지-이용"><i class="fa fa-check"></i><b>1.5</b> R 패키지 이용</a></li>
<li class="chapter" data-level="1.6" data-path="chapter1.html"><a href="chapter1.html#r-패키지-관리"><i class="fa fa-check"></i><b>1.6</b> R 패키지 관리</a></li>
<li class="chapter" data-level="1.7" data-path="chapter1.html"><a href="chapter1.html#r-manual"><i class="fa fa-check"></i><b>1.7</b> R Manual</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter2.html"><a href="chapter2.html"><i class="fa fa-check"></i><b>2</b> Tidyverse Package</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapter2.html"><a href="chapter2.html#filter"><i class="fa fa-check"></i><b>2.1</b> filter()</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chapter2.html"><a href="chapter2.html#filter---연속형-변수-처리"><i class="fa fa-check"></i><b>2.1.1</b> filter() - 연속형 변수 처리</a></li>
<li class="chapter" data-level="2.1.2" data-path="chapter2.html"><a href="chapter2.html#filter---이산형-변수-처리"><i class="fa fa-check"></i><b>2.1.2</b> filter() - 이산형 변수 처리</a></li>
<li class="chapter" data-level="2.1.3" data-path="chapter2.html"><a href="chapter2.html#filter---문자형-변수-처리"><i class="fa fa-check"></i><b>2.1.3</b> filter() - 문자형 변수 처리</a></li>
<li class="chapter" data-level="2.1.4" data-path="chapter2.html"><a href="chapter2.html#filter---일반적인-변수-처리"><i class="fa fa-check"></i><b>2.1.4</b> filter() - 일반적인 변수 처리</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chapter2.html"><a href="chapter2.html#pipe"><i class="fa fa-check"></i><b>2.2</b> Pipe : %&gt;%</a></li>
<li class="chapter" data-level="2.3" data-path="chapter2.html"><a href="chapter2.html#select"><i class="fa fa-check"></i><b>2.3</b> select()</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chapter2.html"><a href="chapter2.html#select---선택"><i class="fa fa-check"></i><b>2.3.1</b> select() - 선택</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter2.html"><a href="chapter2.html#select---제거"><i class="fa fa-check"></i><b>2.3.2</b> select() - 제거</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter2.html"><a href="chapter2.html#filter-와-select-혼합"><i class="fa fa-check"></i><b>2.3.3</b> filter() 와 select() 혼합</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapter2.html"><a href="chapter2.html#group_by와-summarise"><i class="fa fa-check"></i><b>2.4</b> group_by()와 summarise()</a></li>
<li class="chapter" data-level="2.5" data-path="chapter2.html"><a href="chapter2.html#arrange"><i class="fa fa-check"></i><b>2.5</b> arrange()</a></li>
<li class="chapter" data-level="2.6" data-path="chapter2.html"><a href="chapter2.html#결측값-처리"><i class="fa fa-check"></i><b>2.6</b> 결측값 처리</a></li>
<li class="chapter" data-level="2.7" data-path="chapter2.html"><a href="chapter2.html#mutate"><i class="fa fa-check"></i><b>2.7</b> mutate()</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter3.html"><a href="chapter3.html"><i class="fa fa-check"></i><b>3</b> 공단표본코호트 데모자료</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter3.html"><a href="chapter3.html#자격-db---자격-및-보험료-테이블"><i class="fa fa-check"></i><b>3.1</b> 자격 DB - 자격 및 보험료 테이블</a></li>
<li class="chapter" data-level="3.2" data-path="chapter3.html"><a href="chapter3.html#사망-db---출생-및-사망테이블"><i class="fa fa-check"></i><b>3.2</b> 사망 DB - 출생 및 사망테이블</a></li>
<li class="chapter" data-level="3.3" data-path="chapter3.html"><a href="chapter3.html#요양기관-db"><i class="fa fa-check"></i><b>3.3</b> 요양기관 DB</a></li>
<li class="chapter" data-level="3.4" data-path="chapter3.html"><a href="chapter3.html#진료-db---20-테이블"><i class="fa fa-check"></i><b>3.4</b> 진료 DB - 20 테이블</a></li>
<li class="chapter" data-level="3.5" data-path="chapter3.html"><a href="chapter3.html#진료-db---30-테이블"><i class="fa fa-check"></i><b>3.5</b> 진료 DB - 30 테이블</a></li>
<li class="chapter" data-level="3.6" data-path="chapter3.html"><a href="chapter3.html#진료-db---40-테이블"><i class="fa fa-check"></i><b>3.6</b> 진료 DB - 40 테이블</a></li>
<li class="chapter" data-level="3.7" data-path="chapter3.html"><a href="chapter3.html#진료-db---60-테이블"><i class="fa fa-check"></i><b>3.7</b> 진료 DB - 60 테이블</a></li>
<li class="chapter" data-level="3.8" data-path="chapter3.html"><a href="chapter3.html#작업공간-저장-및-불러오기"><i class="fa fa-check"></i><b>3.8</b> 작업공간 저장 및 불러오기</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="chapter3.html"><a href="chapter3.html#객체-목록-확인"><i class="fa fa-check"></i><b>3.8.1</b> 객체 목록 확인</a></li>
<li class="chapter" data-level="3.8.2" data-path="chapter3.html"><a href="chapter3.html#작업공간-저장"><i class="fa fa-check"></i><b>3.8.2</b> 작업공간 저장</a></li>
<li class="chapter" data-level="3.8.3" data-path="chapter3.html"><a href="chapter3.html#작업공간-불러오기"><i class="fa fa-check"></i><b>3.8.3</b> 작업공간 불러오기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter4.html"><a href="chapter4.html"><i class="fa fa-check"></i><b>4</b> 데이터프레임의 활용</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter4.html"><a href="chapter4.html#데이터-프레임"><i class="fa fa-check"></i><b>4.1</b> 데이터 프레임</a></li>
<li class="chapter" data-level="4.2" data-path="chapter4.html"><a href="chapter4.html#데이터-프레임-인덱싱"><i class="fa fa-check"></i><b>4.2</b> 데이터 프레임 인덱싱</a></li>
<li class="chapter" data-level="4.3" data-path="chapter4.html"><a href="chapter4.html#공단자료와-필요패키지-불러오기"><i class="fa fa-check"></i><b>4.3</b> 공단자료와 필요패키지 불러오기</a></li>
<li class="chapter" data-level="4.4" data-path="chapter4.html"><a href="chapter4.html#특정-변수만-남기기"><i class="fa fa-check"></i><b>4.4</b> 특정 변수만 남기기</a></li>
<li class="chapter" data-level="4.5" data-path="chapter4.html"><a href="chapter4.html#특정-변수-지우기"><i class="fa fa-check"></i><b>4.5</b> 특정 변수 지우기</a></li>
<li class="chapter" data-level="4.6" data-path="chapter4.html"><a href="chapter4.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>4.6</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="4.7" data-path="chapter4.html"><a href="chapter4.html#특정-위치의-관찰값-추출"><i class="fa fa-check"></i><b>4.7</b> 특정 위치의 관찰값 추출</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter5.html"><a href="chapter5.html"><i class="fa fa-check"></i><b>5</b> 새로운 변수 생성</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter5.html"><a href="chapter5.html#기존-변수의-값-바꾸기"><i class="fa fa-check"></i><b>5.1</b> 기존 변수의 값 바꾸기</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Insurance Claims Data Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter4" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> 데이터프레임의 활용</h1>
<div id="데이터-프레임" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> 데이터 프레임</h2>
<ul>
<li>데이터 프레임은 [x,y] 형태로 된 데이터셋을 의미한다. 여기서 x는 행을, y는 열을 의미한다.</li>
<li>R에서 통계자료 분석을 위한 일반적인 형태이다.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="chapter4.html#cb1-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name=</span><span class="fu">c</span>(<span class="st">&quot;GSK&quot;</span>, <span class="st">&quot;MSD&quot;</span>), <span class="at">age=</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">30</span>), <span class="at">address=</span><span class="fu">c</span>(<span class="st">&quot;서울&quot;</span>,<span class="st">&quot;대전&quot;</span>)); x</span></code></pre></div>
<pre><code>##   name age address
## 1  GSK  20    서울
## 2  MSD  30    대전</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="chapter4.html#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">cbind</span>(x, <span class="at">dep=</span><span class="fu">c</span>(<span class="st">&quot;제약&quot;</span>,<span class="st">&quot;경영&quot;</span>)); x</span></code></pre></div>
<pre><code>##   name age address  dep
## 1  GSK  20    서울 제약
## 2  MSD  30    대전 경영</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="chapter4.html#cb5-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rbind</span>(x,<span class="fu">c</span>(<span class="st">&quot;Bayer&quot;</span>, <span class="at">age=</span><span class="dv">40</span>, <span class="at">address=</span><span class="st">&quot;대구&quot;</span>, <span class="at">dep=</span><span class="st">&quot;마켓팅&quot;</span>)); x</span></code></pre></div>
<pre><code>##    name age address    dep
## 1   GSK  20    서울   제약
## 2   MSD  30    대전   경영
## 3 Bayer  40    대구 마켓팅</code></pre>
</div>
<div id="데이터-프레임-인덱싱" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> 데이터 프레임 인덱싱</h2>
<p>R 명령어와 관련된 자세한 사항은 <a href="https://elflini.github.io/study/rmanual/">https://elflini.github.io/study/rmanual/</a> 또는 <a href="https://sites.google.com/view/statedu/r-program">https://sites.google.com/view/statedu/r-program</a>을 참조하길 바란다.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="chapter4.html#cb7-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span>,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;대전&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="chapter4.html#cb9-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span>,]</span></code></pre></div>
<pre><code>##    name age address    dep
## 3 Bayer  40    대구 마켓팅</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="chapter4.html#cb11-1" aria-hidden="true" tabindex="-1"></a>x[,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;서울&quot; &quot;대전&quot; &quot;대구&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="chapter4.html#cb13-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">2</span>,]</span></code></pre></div>
<pre><code>##    name age address    dep
## 1   GSK  20    서울   제약
## 3 Bayer  40    대구 마켓팅</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="chapter4.html#cb15-1" aria-hidden="true" tabindex="-1"></a>x[<span class="st">&quot;name&quot;</span>]</span></code></pre></div>
<pre><code>##    name
## 1   GSK
## 2   MSD
## 3 Bayer</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="chapter4.html#cb17-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>name</span></code></pre></div>
<pre><code>## [1] &quot;GSK&quot;   &quot;MSD&quot;   &quot;Bayer&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="chapter4.html#cb19-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;GSK&quot;   &quot;MSD&quot;   &quot;Bayer&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="chapter4.html#cb21-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">1</span>]][<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;MSD&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="chapter4.html#cb23-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>name[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Novartis&quot;</span>; x</span></code></pre></div>
<pre><code>##       name age address    dep
## 1      GSK  20    서울   제약
## 2 Novartis  30    대전   경영
## 3    Bayer  40    대구 마켓팅</code></pre>
</div>
<div id="공단자료와-필요패키지-불러오기" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> 공단자료와 필요패키지 불러오기</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="chapter4.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.2     v dplyr   1.0.6
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="chapter4.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 공단자료 부르기</span></span>
<span id="cb29-2"><a href="chapter4.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;claim.RData&quot;</span>)</span>
<span id="cb29-3"><a href="chapter4.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;death&quot; &quot;inst&quot;  &quot;jk&quot;    &quot;t20&quot;   &quot;t30&quot;   &quot;t40&quot;   &quot;t60&quot;   &quot;x&quot;</code></pre>
</div>
<div id="특정-변수만-남기기" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> 특정 변수만 남기기</h2>
<p>특정 변수만 취하여 새로운 데이터셋을 구성하고 싶을때, 데이터프레임 인덱싱 작업 또는 여러 함수를 통해서 구성이 가능하다(예: select() 함수).</p>
<pre><code>select(데이터셋, 변수1, 변수2, ...) 또는
데이터셋 %&gt;% select(변수1, 변수2, ...)</code></pre>
<p>T20 데이터셋에서 개인고유번호(RN_INDI), 청구고유번호(RN_KEY), 심결요양급여비용총액(ED_RC_TOT_AMT) 세 개의 변수만 남겨서 데이터셋을 생성시켜보자. 프로그램은 다음과 같다.</p>
<ul>
<li>방법1</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="chapter4.html#cb32-1" aria-hidden="true" tabindex="-1"></a>t20_ex <span class="ot">&lt;-</span> t20[<span class="fu">c</span>(<span class="st">&quot;rn_indi&quot;</span>, <span class="st">&quot;rn_key&quot;</span>, <span class="st">&quot;ed_rc_tot_amt&quot;</span>)]</span>
<span id="cb32-2"><a href="chapter4.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t20_ex)</span></code></pre></div>
<pre><code>##   rn_indi       rn_key ed_rc_tot_amt
## 1  746491 2.002100e+12         10590
## 2  848340 2.002071e+12         10590
## 3  992522 2.002091e+12         10590
## 4  543044 2.002090e+12         10590
## 5  928716 2.002080e+12         10590
## 6  633585 2.002050e+12         10590</code></pre>
<ul>
<li>방법2</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="chapter4.html#cb34-1" aria-hidden="true" tabindex="-1"></a>t20_ex <span class="ot">&lt;-</span> t20 <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="chapter4.html#cb34-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(rn_indi, rn_key, ed_rc_tot_amt)</span>
<span id="cb34-3"><a href="chapter4.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t20_ex)</span></code></pre></div>
<pre><code>##   rn_indi       rn_key ed_rc_tot_amt
## 1  746491 2.002100e+12         10590
## 2  848340 2.002071e+12         10590
## 3  992522 2.002091e+12         10590
## 4  543044 2.002090e+12         10590
## 5  928716 2.002080e+12         10590
## 6  633585 2.002050e+12         10590</code></pre>
</div>
<div id="특정-변수-지우기" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> 특정 변수 지우기</h2>
<p>특정 변수를 지우고 새로운 데이터셋을 구성하고 싶을때 인덱싱 방법이나 select() 함수를 이용할때는 ‘-’를 붙여서 삭제한다. 또는!’’(not)을 이용하여 변수를 삭제한다.</p>
<pre><code>select(데이터셋, -변수1, -변수2, ...) 또는
데이터셋 %&gt;% select(-변수1, -변수2, ...)</code></pre>
<p>T40 데이터셋에서 요양개시일자(MDCARE_STRT_DT), 서식코드(FORM_CD), 세부전문과목코드(DETAIL_TMSG_SUBJ_CD), 상병분류구분코드(SICK_CLSF_TYPE)을 제거하고 개인고유번호(RN_INDI), 청구고유번호(RN_KEY), 심결요양급여비용총액(ED_RC_TOT_AMT), 기준년도(STD_YYYY) 네 개의 변수만 남겨서 이터셋을 생성시켜보자. 프로그램은 다음과 같다.</p>
<ul>
<li>방법1</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="chapter4.html#cb37-1" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">names</span>(t40) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;mdcare_strt_dt&quot;</span>, <span class="st">&quot;form_cd&quot;</span>, <span class="st">&quot;detail_tmsg_subj_cd&quot;</span>, <span class="st">&quot;sick_clsf_type&quot;</span>)</span>
<span id="cb37-2"><a href="chapter4.html#cb37-2" aria-hidden="true" tabindex="-1"></a>t40_ex <span class="ot">&lt;-</span> t40[,<span class="sc">!</span>index]</span>
<span id="cb37-3"><a href="chapter4.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t40_ex)</span></code></pre></div>
<pre><code>##   rn_indi       rn_key mcex_sick_sym std_yyyy
## 1  596535 2.002120e+12          J209     2002
## 2  615374 2.002121e+12          J209     2002
## 3 1005547 2.002121e+12          J209     2002
## 4  226594 2.002120e+12          J209     2002
## 5  204930 2.002121e+12          J209     2002
## 6  798943 2.002040e+12          J209     2002</code></pre>
<ul>
<li>방법2</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="chapter4.html#cb39-1" aria-hidden="true" tabindex="-1"></a>t40_ex <span class="ot">&lt;-</span> t40 <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="chapter4.html#cb39-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(<span class="sc">-</span>mdcare_strt_dt, <span class="sc">-</span>form_cd, <span class="sc">-</span>detail_tmsg_subj_cd, <span class="sc">-</span>sick_clsf_type)</span>
<span id="cb39-3"><a href="chapter4.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t40_ex)</span></code></pre></div>
<pre><code>##   rn_indi       rn_key mcex_sick_sym std_yyyy
## 1  596535 2.002120e+12          J209     2002
## 2  615374 2.002121e+12          J209     2002
## 3 1005547 2.002121e+12          J209     2002
## 4  226594 2.002120e+12          J209     2002
## 5  204930 2.002121e+12          J209     2002
## 6  798943 2.002040e+12          J209     2002</code></pre>
</div>
<div id="변수-이름-바꾸기" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> 변수 이름 바꾸기</h2>
<p>생성된 데이터셋의 변수 이름을 바꾸거나 새로운 데이터셋 생성시 다른 이름으로 변수를 저장해야 하는 경우 사용하는 명령문이 RENAME 이다. RENAME 문을 사용하는 방법은 다음과 같다.</p>
<pre><code>rename(데이터셋, 새로운변수명1=기존변수명1,새로운변수명2=기존변수명2,...) 또는
데이터셋 %&gt;% select(새로운변수명1=기존변수명1,새로운변수명2=기존변수명2,...)</code></pre>
<p>T20 데이터셋에서 개인고유번호(RN_INDI)를 PERSON_ID로, 청구고유번호(RN_KEY)를 MID, 심결요양급여비용총액(ED_RC_TOT_AMT)를 COST로 변경하여 데이터셋을 생성시켜보자. 프로그램은 다음과 같다.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="chapter4.html#cb42-1" aria-hidden="true" tabindex="-1"></a>t20_ex <span class="ot">&lt;-</span> t20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(rn_indi, rn_key, ed_rc_tot_amt)</span>
<span id="cb42-2"><a href="chapter4.html#cb42-2" aria-hidden="true" tabindex="-1"></a>t20_ex <span class="ot">&lt;-</span> t20_ex <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">person_id=</span>rn_indi, <span class="at">mid=</span>rn_key, <span class="at">cost=</span>ed_rc_tot_amt)</span>
<span id="cb42-3"><a href="chapter4.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t20_ex)</span></code></pre></div>
<pre><code>##   person_id          mid  cost
## 1    746491 2.002100e+12 10590
## 2    848340 2.002071e+12 10590
## 3    992522 2.002091e+12 10590
## 4    543044 2.002090e+12 10590
## 5    928716 2.002080e+12 10590
## 6    633585 2.002050e+12 10590</code></pre>
<p>위의 프로그램은 pipe를 이용하여 하나의 구문으로 실행이 가능하다.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="chapter4.html#cb44-1" aria-hidden="true" tabindex="-1"></a>t20_ex <span class="ot">&lt;-</span> t20 <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="chapter4.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rn_indi, rn_key, ed_rc_tot_amt) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="chapter4.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">person_id=</span>rn_indi, <span class="at">mid=</span>rn_key, <span class="at">cost=</span>ed_rc_tot_amt)</span>
<span id="cb44-4"><a href="chapter4.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t20_ex)</span></code></pre></div>
<pre><code>##   person_id          mid  cost
## 1    746491 2.002100e+12 10590
## 2    848340 2.002071e+12 10590
## 3    992522 2.002091e+12 10590
## 4    543044 2.002090e+12 10590
## 5    928716 2.002080e+12 10590
## 6    633585 2.002050e+12 10590</code></pre>
</div>
<div id="특정-위치의-관찰값-추출" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> 특정 위치의 관찰값 추출</h2>
<p>R에서는 특정 위치의 관찰값은 인덱싱을 이용하여 아주 쉽게 추출이 가능하다.</p>
<pre><code>데이터셋[시작위치:끝위치,] 또는
데이터셋[c(위치값들),]</code></pre>
<p>T20 데이터셋에서 1,001번 행부터 2,000번 행까지 1,000개의 행만 추출하여 데이터셋을 생성하는 경우를 생각해보자. 프로그램은 다음과 같다.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="chapter4.html#cb47-1" aria-hidden="true" tabindex="-1"></a>t20_ex <span class="ot">&lt;-</span> t20[<span class="dv">1001</span><span class="sc">:</span><span class="dv">2000</span>,]</span>
<span id="cb47-2"><a href="chapter4.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(t20_ex)</span></code></pre></div>
<pre><code>##      rn_indi       rn_key rn_inst mdcare_strt_dt form_cd mcare_subj_cd
## 1001  880016 2.002020e+12   98672       20020214       3            11
## 1002  963070 2.002100e+12   87635       20021009       3             1
## 1003  295221 2.002030e+12   58543       20020305       3            11
## 1004    5707 2.002061e+12   36485       20020613       3             1
## 1005  964637 2.002091e+12   37020       20020904       3             5
## 1006  250680 2.002010e+12  135669       20020121       3            14
##      sick_sym1 sick_sym2 hsptz_path_type ofij_type oprtn_yn mdcare_dd_cnt
## 1001      J069                        NA         0        0             2
## 1002       J06                        NA         0        0             4
## 1003      J039                        NA         0        0             2
## 1004       A09                        NA                  0             1
## 1005      S934                        NA         0        0             1
## 1006       L84                        NA         0        0             1
##      vshsp_dd_cnt tot_prsc_dd_cnt mcare_rslt_type fst_hsptz_dt edc_add_rt
## 1001            2               6               5           NA       0.15
## 1002            2               0               5           NA       0.15
## 1003            2               3               5           NA       0.15
## 1004            1               1               5           NA       0.15
## 1005            1               1               5           NA       0.15
## 1006            1               3               5           NA       0.15
##      spcf_sym_type ed_rc_tot_amt edc_sba edc_insur_brdn_amt std_yyyy
## 1001                       21520    6000              15520     2002
## 1002                       23130    6000              17130     2002
## 1003                       18320    6000              12320     2002
## 1004                       15250    4570              10680     2002
## 1005                       22980    6890              16090     2002
## 1006                       27280    8180              19100     2002</code></pre>
<p>첫번째 부터 5번째까지는</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="chapter4.html#cb49-1" aria-hidden="true" tabindex="-1"></a>t20[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span></code></pre></div>
<pre><code>##   rn_indi       rn_key rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
## 1  746491 2.002100e+12   47036       20021016       3            14      L218
## 2  848340 2.002071e+12   47036       20020712       3            14      B351
## 3  992522 2.002091e+12   70468       20020923       3            10        N_
## 4  543044 2.002090e+12   22970       20020930       3            13      J304
## 5  928716 2.002080e+12   37742       20020826       3            13      J311
##   sick_sym2 hsptz_path_type ofij_type oprtn_yn mdcare_dd_cnt vshsp_dd_cnt
## 1                        NA         0        0             1            1
## 2                        NA         0        0             1            1
## 3                        NA         0        0             1            1
## 4                        32         0        0             1            1
## 5                        NA         0        0             1            1
##   tot_prsc_dd_cnt mcare_rslt_type fst_hsptz_dt edc_add_rt spcf_sym_type
## 1               3               5           NA       0.15              
## 2               3               5           NA       0.15              
## 3               0               5           NA       0.15              
## 4               0               5           NA       0.15              
## 5               3               5           NA       0.15              
##   ed_rc_tot_amt edc_sba edc_insur_brdn_amt std_yyyy
## 1         10590    3000               7590     2002
## 2         10590    3000               7590     2002
## 3         10590    3000               7590     2002
## 4         10590    3000               7590     2002
## 5         10590    3000               7590     2002</code></pre>
<p>135,000번째부터 마지막까지는</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="chapter4.html#cb51-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> t20[<span class="dv">135000</span><span class="sc">:</span><span class="fu">nrow</span>(t20),]</span>
<span id="cb51-2"><a href="chapter4.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(temp)</span></code></pre></div>
<pre><code>##        rn_indi       rn_key rn_inst mdcare_strt_dt form_cd mcare_subj_cd
## 135000   66424 2.015071e+12  113143       20150720       8             0
## 135001   66424 2.015072e+12  113143       20150702       8             0
## 135002   66424 2.015070e+12  113143       20150710       8             0
## 135003   66424 2.015071e+12  113143       20150728       8             0
## 135004   66424 2.015081e+12  113143       20150807       8             0
## 135005   66424 2.015082e+12  113143       20150819       8             0
##        sick_sym1 sick_sym2 hsptz_path_type ofij_type oprtn_yn mdcare_dd_cnt
## 135000      U280                        NA         0        0             3
## 135001      U280                        NA         0        0             3
## 135002      U280                        NA         0        0             3
## 135003      U280                        NA         0        0             3
## 135004      U280     M5446              NA         0        0             3
## 135005      U280                        NA         0        0             3
##        vshsp_dd_cnt tot_prsc_dd_cnt mcare_rslt_type fst_hsptz_dt edc_add_rt
## 135000            1               0              NA           NA          0
## 135001            1               0              NA           NA          0
## 135002            1               0              NA           NA          0
## 135003            1               0              NA           NA          0
## 135004            1               0              NA           NA          0
## 135005            1               0              NA           NA          0
##        spcf_sym_type ed_rc_tot_amt edc_sba edc_insur_brdn_amt std_yyyy
## 135000                        8000    1800               6200     2015
## 135001                        8000    1800               6200     2015
## 135002                        8000    1800               6200     2015
## 135003                        8000    1800               6200     2015
## 135004                        8000    1800               6200     2015
## 135005                        8000    1800               6200     2015</code></pre>
<!-------- End ------------>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter5.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rmanual.pdf", "rmanual.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
