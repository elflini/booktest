<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 조건문 | Insurance Claims Data Analysis with R</title>
  <meta name="description" content="This is a R manual for analysis of insurance claims data" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 조건문 | Insurance Claims Data Analysis with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a R manual for analysis of insurance claims data" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 조건문 | Insurance Claims Data Analysis with R" />
  
  <meta name="twitter:description" content="This is a R manual for analysis of insurance claims data" />
  

<meta name="author" content="Jin Hyun Nam" />


<meta name="date" content="2021-12-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter5.html"/>
<link rel="next" href="chapter7.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Claims Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>머리말</a></li>
<li class="chapter" data-level="1" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i><b>1</b> R이란?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter1.html"><a href="chapter1.html#r-설치"><i class="fa fa-check"></i><b>1.1</b> R 설치</a></li>
<li class="chapter" data-level="1.2" data-path="chapter1.html"><a href="chapter1.html#r-프로그램의-구성"><i class="fa fa-check"></i><b>1.2</b> R 프로그램의 구성</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chapter1.html"><a href="chapter1.html#파일"><i class="fa fa-check"></i><b>1.2.1</b> 파일</a></li>
<li class="chapter" data-level="1.2.2" data-path="chapter1.html"><a href="chapter1.html#편집"><i class="fa fa-check"></i><b>1.2.2</b> 편집</a></li>
<li class="chapter" data-level="1.2.3" data-path="chapter1.html"><a href="chapter1.html#기타"><i class="fa fa-check"></i><b>1.2.3</b> 기타</a></li>
<li class="chapter" data-level="1.2.4" data-path="chapter1.html"><a href="chapter1.html#패키지"><i class="fa fa-check"></i><b>1.2.4</b> 패키지</a></li>
<li class="chapter" data-level="1.2.5" data-path="chapter1.html"><a href="chapter1.html#윈도우즈"><i class="fa fa-check"></i><b>1.2.5</b> 윈도우즈</a></li>
<li class="chapter" data-level="1.2.6" data-path="chapter1.html"><a href="chapter1.html#도움말"><i class="fa fa-check"></i><b>1.2.6</b> 도움말</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chapter1.html"><a href="chapter1.html#r-프로그램-특징"><i class="fa fa-check"></i><b>1.3</b> R 프로그램 특징</a></li>
<li class="chapter" data-level="1.4" data-path="chapter1.html"><a href="chapter1.html#rstudio-설치"><i class="fa fa-check"></i><b>1.4</b> RStudio 설치</a></li>
<li class="chapter" data-level="1.5" data-path="chapter1.html"><a href="chapter1.html#r-패키지-이용"><i class="fa fa-check"></i><b>1.5</b> R 패키지 이용</a></li>
<li class="chapter" data-level="1.6" data-path="chapter1.html"><a href="chapter1.html#r-패키지-관리"><i class="fa fa-check"></i><b>1.6</b> R 패키지 관리</a></li>
<li class="chapter" data-level="1.7" data-path="chapter1.html"><a href="chapter1.html#산술-연산자"><i class="fa fa-check"></i><b>1.7</b> 산술 연산자</a></li>
<li class="chapter" data-level="1.8" data-path="chapter1.html"><a href="chapter1.html#논리-연산자와-비교-연산자"><i class="fa fa-check"></i><b>1.8</b> 논리 연산자와 비교 연산자</a></li>
<li class="chapter" data-level="1.9" data-path="chapter1.html"><a href="chapter1.html#기초-산술-함수"><i class="fa fa-check"></i><b>1.9</b> 기초 산술 함수</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="chapter1.html"><a href="chapter1.html#통계-함수"><i class="fa fa-check"></i><b>1.9.1</b> 통계 함수</a></li>
<li class="chapter" data-level="1.9.2" data-path="chapter1.html"><a href="chapter1.html#로그-및-지수-함수-logarithms-and-exponentials"><i class="fa fa-check"></i><b>1.9.2</b> 로그 및 지수 함수 (Logarithms and Exponentials)</a></li>
<li class="chapter" data-level="1.9.3" data-path="chapter1.html"><a href="chapter1.html#삼각-함수"><i class="fa fa-check"></i><b>1.9.3</b> 삼각 함수</a></li>
<li class="chapter" data-level="1.9.4" data-path="chapter1.html"><a href="chapter1.html#기타-수학-함수"><i class="fa fa-check"></i><b>1.9.4</b> 기타 수학 함수</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="chapter1.html"><a href="chapter1.html#객체의-명명과-할당"><i class="fa fa-check"></i><b>1.10</b> 객체의 명명과 할당</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="chapter1.html"><a href="chapter1.html#객체변수-만들기"><i class="fa fa-check"></i><b>1.10.1</b> 객체(변수) 만들기</a></li>
<li class="chapter" data-level="1.10.2" data-path="chapter1.html"><a href="chapter1.html#객체-목록-보기"><i class="fa fa-check"></i><b>1.10.2</b> 객체 목록 보기</a></li>
<li class="chapter" data-level="1.10.3" data-path="chapter1.html"><a href="chapter1.html#객체변수-지우기"><i class="fa fa-check"></i><b>1.10.3</b> 객체(변수) 지우기</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="chapter1.html"><a href="chapter1.html#데이터-유형"><i class="fa fa-check"></i><b>1.11</b> 데이터 유형</a>
<ul>
<li class="chapter" data-level="1.11.1" data-path="chapter1.html"><a href="chapter1.html#데이터의-기본-유형"><i class="fa fa-check"></i><b>1.11.1</b> 데이터의 기본 유형</a></li>
<li class="chapter" data-level="1.11.2" data-path="chapter1.html"><a href="chapter1.html#특수-데이터"><i class="fa fa-check"></i><b>1.11.2</b> 특수 데이터</a></li>
<li class="chapter" data-level="1.11.3" data-path="chapter1.html"><a href="chapter1.html#데이터-유형-함수"><i class="fa fa-check"></i><b>1.11.3</b> 데이터 유형 함수</a></li>
<li class="chapter" data-level="1.11.4" data-path="chapter1.html"><a href="chapter1.html#데이터-유형-변경"><i class="fa fa-check"></i><b>1.11.4</b> 데이터 유형 변경</a></li>
</ul></li>
<li class="chapter" data-level="1.12" data-path="chapter1.html"><a href="chapter1.html#자료의-입력"><i class="fa fa-check"></i><b>1.12</b> 자료의 입력</a>
<ul>
<li class="chapter" data-level="1.12.1" data-path="chapter1.html"><a href="chapter1.html#read.table"><i class="fa fa-check"></i><b>1.12.1</b> read.table()</a></li>
<li class="chapter" data-level="1.12.2" data-path="chapter1.html"><a href="chapter1.html#read.csv"><i class="fa fa-check"></i><b>1.12.2</b> read.csv()</a></li>
<li class="chapter" data-level="1.12.3" data-path="chapter1.html"><a href="chapter1.html#read.delim"><i class="fa fa-check"></i><b>1.12.3</b> read.delim()</a></li>
<li class="chapter" data-level="1.12.4" data-path="chapter1.html"><a href="chapter1.html#read_excel"><i class="fa fa-check"></i><b>1.12.4</b> read_excel()</a></li>
</ul></li>
<li class="chapter" data-level="1.13" data-path="chapter1.html"><a href="chapter1.html#자료의-출력"><i class="fa fa-check"></i><b>1.13</b> 자료의 출력</a>
<ul>
<li class="chapter" data-level="1.13.1" data-path="chapter1.html"><a href="chapter1.html#write.table"><i class="fa fa-check"></i><b>1.13.1</b> write.table()</a></li>
<li class="chapter" data-level="1.13.2" data-path="chapter1.html"><a href="chapter1.html#write_xlsx"><i class="fa fa-check"></i><b>1.13.2</b> write_xlsx()</a></li>
</ul></li>
<li class="chapter" data-level="1.14" data-path="chapter1.html"><a href="chapter1.html#r-manual"><i class="fa fa-check"></i><b>1.14</b> R Manual</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter2.html"><a href="chapter2.html"><i class="fa fa-check"></i><b>2</b> Tidyverse Package</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapter2.html"><a href="chapter2.html#filter"><i class="fa fa-check"></i><b>2.1</b> filter()</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chapter2.html"><a href="chapter2.html#filter---연속형-변수-처리"><i class="fa fa-check"></i><b>2.1.1</b> filter() - 연속형 변수 처리</a></li>
<li class="chapter" data-level="2.1.2" data-path="chapter2.html"><a href="chapter2.html#filter---이산형-변수-처리"><i class="fa fa-check"></i><b>2.1.2</b> filter() - 이산형 변수 처리</a></li>
<li class="chapter" data-level="2.1.3" data-path="chapter2.html"><a href="chapter2.html#filter---문자형-변수-처리"><i class="fa fa-check"></i><b>2.1.3</b> filter() - 문자형 변수 처리</a></li>
<li class="chapter" data-level="2.1.4" data-path="chapter2.html"><a href="chapter2.html#filter---일반적인-변수-처리"><i class="fa fa-check"></i><b>2.1.4</b> filter() - 일반적인 변수 처리</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chapter2.html"><a href="chapter2.html#pipe"><i class="fa fa-check"></i><b>2.2</b> Pipe : %&gt;%</a></li>
<li class="chapter" data-level="2.3" data-path="chapter2.html"><a href="chapter2.html#select"><i class="fa fa-check"></i><b>2.3</b> select()</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chapter2.html"><a href="chapter2.html#select---선택"><i class="fa fa-check"></i><b>2.3.1</b> select() - 선택</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter2.html"><a href="chapter2.html#select---제거"><i class="fa fa-check"></i><b>2.3.2</b> select() - 제거</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter2.html"><a href="chapter2.html#filter-와-select-혼합"><i class="fa fa-check"></i><b>2.3.3</b> filter() 와 select() 혼합</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapter2.html"><a href="chapter2.html#group_by와-summarise"><i class="fa fa-check"></i><b>2.4</b> group_by()와 summarise()</a></li>
<li class="chapter" data-level="2.5" data-path="chapter2.html"><a href="chapter2.html#arrange"><i class="fa fa-check"></i><b>2.5</b> arrange()</a></li>
<li class="chapter" data-level="2.6" data-path="chapter2.html"><a href="chapter2.html#결측값-처리"><i class="fa fa-check"></i><b>2.6</b> 결측값 처리</a></li>
<li class="chapter" data-level="2.7" data-path="chapter2.html"><a href="chapter2.html#mutate"><i class="fa fa-check"></i><b>2.7</b> mutate()</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter3.html"><a href="chapter3.html"><i class="fa fa-check"></i><b>3</b> 공단표본코호트 데모자료</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter3.html"><a href="chapter3.html#자격-db---자격-및-보험료-테이블"><i class="fa fa-check"></i><b>3.1</b> 자격 DB - 자격 및 보험료 테이블</a></li>
<li class="chapter" data-level="3.2" data-path="chapter3.html"><a href="chapter3.html#사망-db---출생-및-사망테이블"><i class="fa fa-check"></i><b>3.2</b> 사망 DB - 출생 및 사망테이블</a></li>
<li class="chapter" data-level="3.3" data-path="chapter3.html"><a href="chapter3.html#요양기관-db"><i class="fa fa-check"></i><b>3.3</b> 요양기관 DB</a></li>
<li class="chapter" data-level="3.4" data-path="chapter3.html"><a href="chapter3.html#진료-db---20-테이블"><i class="fa fa-check"></i><b>3.4</b> 진료 DB - 20 테이블</a></li>
<li class="chapter" data-level="3.5" data-path="chapter3.html"><a href="chapter3.html#진료-db---30-테이블"><i class="fa fa-check"></i><b>3.5</b> 진료 DB - 30 테이블</a></li>
<li class="chapter" data-level="3.6" data-path="chapter3.html"><a href="chapter3.html#진료-db---40-테이블"><i class="fa fa-check"></i><b>3.6</b> 진료 DB - 40 테이블</a></li>
<li class="chapter" data-level="3.7" data-path="chapter3.html"><a href="chapter3.html#진료-db---60-테이블"><i class="fa fa-check"></i><b>3.7</b> 진료 DB - 60 테이블</a></li>
<li class="chapter" data-level="3.8" data-path="chapter3.html"><a href="chapter3.html#작업공간-저장-및-불러오기"><i class="fa fa-check"></i><b>3.8</b> 작업공간 저장 및 불러오기</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="chapter3.html"><a href="chapter3.html#객체-목록-확인"><i class="fa fa-check"></i><b>3.8.1</b> 객체 목록 확인</a></li>
<li class="chapter" data-level="3.8.2" data-path="chapter3.html"><a href="chapter3.html#작업공간-저장"><i class="fa fa-check"></i><b>3.8.2</b> 작업공간 저장</a></li>
<li class="chapter" data-level="3.8.3" data-path="chapter3.html"><a href="chapter3.html#작업공간-불러오기"><i class="fa fa-check"></i><b>3.8.3</b> 작업공간 불러오기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter4.html"><a href="chapter4.html"><i class="fa fa-check"></i><b>4</b> 데이터프레임의 활용</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter4.html"><a href="chapter4.html#데이터-프레임"><i class="fa fa-check"></i><b>4.1</b> 데이터 프레임</a></li>
<li class="chapter" data-level="4.2" data-path="chapter4.html"><a href="chapter4.html#데이터-프레임-인덱싱"><i class="fa fa-check"></i><b>4.2</b> 데이터 프레임 인덱싱</a></li>
<li class="chapter" data-level="4.3" data-path="chapter4.html"><a href="chapter4.html#공단자료와-필요패키지-불러오기"><i class="fa fa-check"></i><b>4.3</b> 공단자료와 필요패키지 불러오기</a></li>
<li class="chapter" data-level="4.4" data-path="chapter4.html"><a href="chapter4.html#특정-변수만-남기기"><i class="fa fa-check"></i><b>4.4</b> 특정 변수만 남기기</a></li>
<li class="chapter" data-level="4.5" data-path="chapter4.html"><a href="chapter4.html#특정-변수-지우기"><i class="fa fa-check"></i><b>4.5</b> 특정 변수 지우기</a></li>
<li class="chapter" data-level="4.6" data-path="chapter4.html"><a href="chapter4.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>4.6</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="4.7" data-path="chapter4.html"><a href="chapter4.html#특정-위치의-관찰값-추출"><i class="fa fa-check"></i><b>4.7</b> 특정 위치의 관찰값 추출</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter5.html"><a href="chapter5.html"><i class="fa fa-check"></i><b>5</b> 새로운 변수 생성</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter5.html"><a href="chapter5.html#기존-변수의-값-바꾸기"><i class="fa fa-check"></i><b>5.1</b> 기존 변수의 값 바꾸기</a></li>
<li class="chapter" data-level="5.2" data-path="chapter5.html"><a href="chapter5.html#새로운-변수-만들기"><i class="fa fa-check"></i><b>5.2</b> 새로운 변수 만들기</a></li>
<li class="chapter" data-level="5.3" data-path="chapter5.html"><a href="chapter5.html#round-함수-이용"><i class="fa fa-check"></i><b>5.3</b> Round 함수 이용</a></li>
<li class="chapter" data-level="5.4" data-path="chapter5.html"><a href="chapter5.html#순자를-문자로-문자를-숫자로"><i class="fa fa-check"></i><b>5.4</b> 순자를 문자로, 문자를 숫자로</a></li>
<li class="chapter" data-level="5.5" data-path="chapter5.html"><a href="chapter5.html#substr-함수-이용"><i class="fa fa-check"></i><b>5.5</b> substr 함수 이용</a></li>
<li class="chapter" data-level="5.6" data-path="chapter5.html"><a href="chapter5.html#날짜-함수-이용"><i class="fa fa-check"></i><b>5.6</b> 날짜 함수 이용</a></li>
<li class="chapter" data-level="5.7" data-path="chapter5.html"><a href="chapter5.html#누적합-함수-이용"><i class="fa fa-check"></i><b>5.7</b> 누적합 함수 이용</a></li>
<li class="chapter" data-level="5.8" data-path="chapter5.html"><a href="chapter5.html#lag과-diff-함수-이용"><i class="fa fa-check"></i><b>5.8</b> lag과 diff 함수 이용</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chapter6.html"><a href="chapter6.html"><i class="fa fa-check"></i><b>6</b> 조건문</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chapter6.html"><a href="chapter6.html#특정-조건을-만족하는-관찰값-선택하기"><i class="fa fa-check"></i><b>6.1</b> 특정 조건을 만족하는 관찰값 선택하기</a></li>
<li class="chapter" data-level="6.2" data-path="chapter6.html"><a href="chapter6.html#특정-조건을-만족하는-관찰값-삭제하기"><i class="fa fa-check"></i><b>6.2</b> 특정 조건을 만족하는 관찰값 삭제하기</a></li>
<li class="chapter" data-level="6.3" data-path="chapter6.html"><a href="chapter6.html#조건문-활용하기"><i class="fa fa-check"></i><b>6.3</b> 조건문 활용하기</a></li>
<li class="chapter" data-level="6.4" data-path="chapter6.html"><a href="chapter6.html#조건문-일반화하기"><i class="fa fa-check"></i><b>6.4</b> 조건문 일반화하기</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapter7.html"><a href="chapter7.html"><i class="fa fa-check"></i><b>7</b> 자료의 정렬</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chapter7.html"><a href="chapter7.html#하나의-변수에-의한-관찰값의-정렬"><i class="fa fa-check"></i><b>7.1</b> 하나의 변수에 의한 관찰값의 정렬</a></li>
<li class="chapter" data-level="7.2" data-path="chapter7.html"><a href="chapter7.html#여러-개의-변수에-의한-관찰값의-정렬"><i class="fa fa-check"></i><b>7.2</b> 여러 개의 변수에 의한 관찰값의 정렬</a></li>
<li class="chapter" data-level="7.3" data-path="chapter7.html"><a href="chapter7.html#처음과-마지막-개체-추출하기"><i class="fa fa-check"></i><b>7.3</b> 처음과 마지막 개체 추출하기</a></li>
<li class="chapter" data-level="7.4" data-path="chapter7.html"><a href="chapter7.html#동일한-관찰값의-제거"><i class="fa fa-check"></i><b>7.4</b> 동일한 관찰값의 제거</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chapter8.html"><a href="chapter8.html"><i class="fa fa-check"></i><b>8</b> 반복문</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chapter8.html"><a href="chapter8.html#조건에-의한-반복"><i class="fa fa-check"></i><b>8.1</b> 조건에 의한 반복</a></li>
<li class="chapter" data-level="8.2" data-path="chapter8.html"><a href="chapter8.html#개체에-의한-반복"><i class="fa fa-check"></i><b>8.2</b> 개체에 의한 반복</a></li>
<li class="chapter" data-level="8.3" data-path="chapter8.html"><a href="chapter8.html#다중-반복"><i class="fa fa-check"></i><b>8.3</b> 다중 반복</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chapter9.html"><a href="chapter9.html"><i class="fa fa-check"></i><b>9</b> 데이터셋 합치기</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chapter9.html"><a href="chapter9.html#변수-기준-개체-통합"><i class="fa fa-check"></i><b>9.1</b> 변수 기준 개체 통합</a></li>
<li class="chapter" data-level="9.2" data-path="chapter9.html"><a href="chapter9.html#개체-기준-변수-통합"><i class="fa fa-check"></i><b>9.2</b> 개체 기준 변수 통합</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chapter10.html"><a href="chapter10.html"><i class="fa fa-check"></i><b>10</b> Tidyverse 활용</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chapter10.html"><a href="chapter10.html#tidyverse-dplyr-기본-구조"><i class="fa fa-check"></i><b>10.1</b> Tidyverse (dplyr) 기본 구조</a></li>
<li class="chapter" data-level="10.2" data-path="chapter10.html"><a href="chapter10.html#단일-데이터셋-다루기"><i class="fa fa-check"></i><b>10.2</b> 단일 데이터셋 다루기</a></li>
<li class="chapter" data-level="10.3" data-path="chapter10.html"><a href="chapter10.html#여러-데이터셋-다루기"><i class="fa fa-check"></i><b>10.3</b> 여러 데이터셋 다루기</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="chapter11.html"><a href="chapter11.html"><i class="fa fa-check"></i><b>11</b> 사용자 정의 함수</a></li>
<li class="chapter" data-level="12" data-path="chapter12.html"><a href="chapter12.html"><i class="fa fa-check"></i><b>12</b> 예제1</a>
<ul>
<li class="chapter" data-level="12.1" data-path="chapter12.html"><a href="chapter12.html#연구-설계"><i class="fa fa-check"></i><b>12.1</b> 연구 설계</a></li>
<li class="chapter" data-level="12.2" data-path="chapter12.html"><a href="chapter12.html#프로그램"><i class="fa fa-check"></i><b>12.2</b> 프로그램</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Insurance Claims Data Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter6" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> 조건문</h1>
<p>공단자료와 필요 패키지 불러오기</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="chapter6.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;claim.RData&quot;</span>)</span>
<span id="cb1-2"><a href="chapter6.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="chapter6.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># 날짜 함수</span></span></code></pre></div>
<div id="특정-조건을-만족하는-관찰값-선택하기" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> 특정 조건을 만족하는 관찰값 선택하기</h2>
<p>특정 조건을 만족하는 개체만 선택하거나, 특정 조건을 만족하는 경우 변수의 값을 변경하는 등의 명령을 수행하기 위해서 조건문을 담당하는 if 문을 사용한다. R에서는 [if (조건) {명령문}], [if (조건) {명령문} else {명령문}], [ifelse(조건,명령문1,명령문2)] 등과 같이 여러 가지 형태로 사용할 수 있다.</p>
<p>먼저 특정 조건을 만족하는 개체를 선택해서 새로운 데이터셋을 구성하는 조건문에 대해서 알아보자. 이 경우 if문의 사용없이 조건 적용이 가능하다. 사용 방법은 다음과 같다.</p>
<pre><code>1. 새로운 데이터 셋 = 기존 데이터 셋[조건,]
2. 새로운 데이터 셋 = subset(기존 데이터셋, 조건)
3. 새로운 데이터 셋 = filter(기존 데이터셋, 조건)</code></pre>
<p>하나 이상의 조건문을 나열할 수 있으며, 나열된 조건을 만족하는 개체들만으로 새로운 데이터셋을 구성한다. 이때 조건문은 개체의 선택에만 관여한다.</p>
<p>t20 데이터셋에서 주상병(sick_sym1) 코드를 첫 세자리만 추출하여 주상병이 제2형 당뇨(‘E11’)인 명세서만 추출하여 t20_if 데이터셋을 생성해보자. 프로그램은 다음과 같다.</p>
<ul>
<li>방법1</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="chapter6.html#cb3-1" aria-hidden="true" tabindex="-1"></a>t20_if <span class="ot">&lt;-</span> t20[<span class="fu">substr</span>(t20<span class="sc">$</span>sick_sym1,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&#39;E11&#39;</span>,]</span>
<span id="cb3-2"><a href="chapter6.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="chapter6.html#cb3-3" aria-hidden="true" tabindex="-1"></a>t20_if</span></code></pre></div>
<pre><code>## # A tibble: 2,708 x 22
##    rn_indi rn_key        rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
##      &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    
##  1  819628 2002100385297   99662 20021025       03      01            E11      
##  2  663811 2002090160999  108535 20020929       03      01            E11      
##  3  819628 2002090153862   99662 20020907       03      01            E11      
##  4  490204 2002040486087   36298 20020416       03      01            E11      
##  5  490204 2002020191323   36298 20020214       03      01            E11      
##  6  490204 2002030200247   36298 20020316       03      01            E11      
##  7  490204 2002050098890   36298 20020514       03      01            E11      
##  8  490204 2002070043518   36298 20020715       03      01            E11      
##  9  490204 2002100739596   36298 20021030       03      01            E11      
## 10  490204 2002080663820   36298 20020831       03      01            E11      
## # ... with 2,698 more rows, and 15 more variables: sick_sym2 &lt;chr&gt;,
## #   hsptz_path_type &lt;chr&gt;, ofij_type &lt;chr&gt;, oprtn_yn &lt;chr&gt;,
## #   mdcare_dd_cnt &lt;dbl&gt;, vshsp_dd_cnt &lt;dbl&gt;, tot_prsc_dd_cnt &lt;dbl&gt;,
## #   mcare_rslt_type &lt;chr&gt;, fst_hsptz_dt &lt;chr&gt;, edc_add_rt &lt;dbl&gt;,
## #   spcf_sym_type &lt;chr&gt;, ed_rc_tot_amt &lt;dbl&gt;, edc_sba &lt;dbl&gt;,
## #   edc_insur_brdn_amt &lt;dbl&gt;, std_yyyy &lt;chr&gt;</code></pre>
<ul>
<li>방법2</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="chapter6.html#cb5-1" aria-hidden="true" tabindex="-1"></a>t20_if <span class="ot">&lt;-</span> <span class="fu">subset</span>(t20,<span class="fu">substr</span>(sick_sym1,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&#39;E11&#39;</span>)</span>
<span id="cb5-2"><a href="chapter6.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="chapter6.html#cb5-3" aria-hidden="true" tabindex="-1"></a>t20_if</span></code></pre></div>
<pre><code>## # A tibble: 2,708 x 22
##    rn_indi rn_key        rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
##      &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    
##  1  819628 2002100385297   99662 20021025       03      01            E11      
##  2  663811 2002090160999  108535 20020929       03      01            E11      
##  3  819628 2002090153862   99662 20020907       03      01            E11      
##  4  490204 2002040486087   36298 20020416       03      01            E11      
##  5  490204 2002020191323   36298 20020214       03      01            E11      
##  6  490204 2002030200247   36298 20020316       03      01            E11      
##  7  490204 2002050098890   36298 20020514       03      01            E11      
##  8  490204 2002070043518   36298 20020715       03      01            E11      
##  9  490204 2002100739596   36298 20021030       03      01            E11      
## 10  490204 2002080663820   36298 20020831       03      01            E11      
## # ... with 2,698 more rows, and 15 more variables: sick_sym2 &lt;chr&gt;,
## #   hsptz_path_type &lt;chr&gt;, ofij_type &lt;chr&gt;, oprtn_yn &lt;chr&gt;,
## #   mdcare_dd_cnt &lt;dbl&gt;, vshsp_dd_cnt &lt;dbl&gt;, tot_prsc_dd_cnt &lt;dbl&gt;,
## #   mcare_rslt_type &lt;chr&gt;, fst_hsptz_dt &lt;chr&gt;, edc_add_rt &lt;dbl&gt;,
## #   spcf_sym_type &lt;chr&gt;, ed_rc_tot_amt &lt;dbl&gt;, edc_sba &lt;dbl&gt;,
## #   edc_insur_brdn_amt &lt;dbl&gt;, std_yyyy &lt;chr&gt;</code></pre>
<ul>
<li>방법3</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="chapter6.html#cb7-1" aria-hidden="true" tabindex="-1"></a>t20_if <span class="ot">&lt;-</span> t20 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">substr</span>(sick_sym1,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&#39;E11&#39;</span>)</span>
<span id="cb7-2"><a href="chapter6.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="chapter6.html#cb7-3" aria-hidden="true" tabindex="-1"></a>t20_if</span></code></pre></div>
<pre><code>## # A tibble: 2,708 x 22
##    rn_indi rn_key        rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
##      &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    
##  1  819628 2002100385297   99662 20021025       03      01            E11      
##  2  663811 2002090160999  108535 20020929       03      01            E11      
##  3  819628 2002090153862   99662 20020907       03      01            E11      
##  4  490204 2002040486087   36298 20020416       03      01            E11      
##  5  490204 2002020191323   36298 20020214       03      01            E11      
##  6  490204 2002030200247   36298 20020316       03      01            E11      
##  7  490204 2002050098890   36298 20020514       03      01            E11      
##  8  490204 2002070043518   36298 20020715       03      01            E11      
##  9  490204 2002100739596   36298 20021030       03      01            E11      
## 10  490204 2002080663820   36298 20020831       03      01            E11      
## # ... with 2,698 more rows, and 15 more variables: sick_sym2 &lt;chr&gt;,
## #   hsptz_path_type &lt;chr&gt;, ofij_type &lt;chr&gt;, oprtn_yn &lt;chr&gt;,
## #   mdcare_dd_cnt &lt;dbl&gt;, vshsp_dd_cnt &lt;dbl&gt;, tot_prsc_dd_cnt &lt;dbl&gt;,
## #   mcare_rslt_type &lt;chr&gt;, fst_hsptz_dt &lt;chr&gt;, edc_add_rt &lt;dbl&gt;,
## #   spcf_sym_type &lt;chr&gt;, ed_rc_tot_amt &lt;dbl&gt;, edc_sba &lt;dbl&gt;,
## #   edc_insur_brdn_amt &lt;dbl&gt;, std_yyyy &lt;chr&gt;</code></pre>
<p>결과를 살펴보면 총 135,524개의 명세서 중에서 ‘E11’을 주상병으로 갖는 명세서는 2,708개가 선택되어 t20_if 데이터셋이 구성된다. 조건을 조금 더 확장하여 주상병이 제2형 당뇨(‘E11’)이면서 동시에 내과 진료과목이 기재된 명세서만 추출하여 t20_if2 데이터셋을 구성해보자. 이때 진료과목코드(mcare_subj_cd)의 값이 ‘01’인 경우 내과를 의미하며 이를 위한 프로그램은 다음과 같다.</p>
<ul>
<li>방법1</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="chapter6.html#cb9-1" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="fu">substr</span>(t20<span class="sc">$</span>sick_sym1,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&#39;E11&#39;</span> <span class="sc">&amp;</span> t20<span class="sc">$</span>mcare_subj_cd<span class="sc">==</span><span class="st">&#39;01&#39;</span></span>
<span id="cb9-2"><a href="chapter6.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="chapter6.html#cb9-3" aria-hidden="true" tabindex="-1"></a>t20_if2 <span class="ot">&lt;-</span> t20[condition,]</span>
<span id="cb9-4"><a href="chapter6.html#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="chapter6.html#cb9-5" aria-hidden="true" tabindex="-1"></a>t20_if2</span></code></pre></div>
<pre><code>## # A tibble: 2,174 x 22
##    rn_indi rn_key        rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
##      &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    
##  1  819628 2002100385297   99662 20021025       03      01            E11      
##  2  663811 2002090160999  108535 20020929       03      01            E11      
##  3  819628 2002090153862   99662 20020907       03      01            E11      
##  4  490204 2002040486087   36298 20020416       03      01            E11      
##  5  490204 2002020191323   36298 20020214       03      01            E11      
##  6  490204 2002030200247   36298 20020316       03      01            E11      
##  7  490204 2002050098890   36298 20020514       03      01            E11      
##  8  490204 2002070043518   36298 20020715       03      01            E11      
##  9  490204 2002100739596   36298 20021030       03      01            E11      
## 10  490204 2002080663820   36298 20020831       03      01            E11      
## # ... with 2,164 more rows, and 15 more variables: sick_sym2 &lt;chr&gt;,
## #   hsptz_path_type &lt;chr&gt;, ofij_type &lt;chr&gt;, oprtn_yn &lt;chr&gt;,
## #   mdcare_dd_cnt &lt;dbl&gt;, vshsp_dd_cnt &lt;dbl&gt;, tot_prsc_dd_cnt &lt;dbl&gt;,
## #   mcare_rslt_type &lt;chr&gt;, fst_hsptz_dt &lt;chr&gt;, edc_add_rt &lt;dbl&gt;,
## #   spcf_sym_type &lt;chr&gt;, ed_rc_tot_amt &lt;dbl&gt;, edc_sba &lt;dbl&gt;,
## #   edc_insur_brdn_amt &lt;dbl&gt;, std_yyyy &lt;chr&gt;</code></pre>
<ul>
<li>방법2</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="chapter6.html#cb11-1" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="fu">substr</span>(t20<span class="sc">$</span>sick_sym1,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&#39;E11&#39;</span> <span class="sc">&amp;</span> t20<span class="sc">$</span>mcare_subj_cd<span class="sc">==</span><span class="st">&#39;01&#39;</span></span>
<span id="cb11-2"><a href="chapter6.html#cb11-2" aria-hidden="true" tabindex="-1"></a>t20_if2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(t20,condition)</span>
<span id="cb11-3"><a href="chapter6.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="chapter6.html#cb11-4" aria-hidden="true" tabindex="-1"></a>t20_if2</span></code></pre></div>
<pre><code>## # A tibble: 2,174 x 22
##    rn_indi rn_key        rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
##      &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    
##  1  819628 2002100385297   99662 20021025       03      01            E11      
##  2  663811 2002090160999  108535 20020929       03      01            E11      
##  3  819628 2002090153862   99662 20020907       03      01            E11      
##  4  490204 2002040486087   36298 20020416       03      01            E11      
##  5  490204 2002020191323   36298 20020214       03      01            E11      
##  6  490204 2002030200247   36298 20020316       03      01            E11      
##  7  490204 2002050098890   36298 20020514       03      01            E11      
##  8  490204 2002070043518   36298 20020715       03      01            E11      
##  9  490204 2002100739596   36298 20021030       03      01            E11      
## 10  490204 2002080663820   36298 20020831       03      01            E11      
## # ... with 2,164 more rows, and 15 more variables: sick_sym2 &lt;chr&gt;,
## #   hsptz_path_type &lt;chr&gt;, ofij_type &lt;chr&gt;, oprtn_yn &lt;chr&gt;,
## #   mdcare_dd_cnt &lt;dbl&gt;, vshsp_dd_cnt &lt;dbl&gt;, tot_prsc_dd_cnt &lt;dbl&gt;,
## #   mcare_rslt_type &lt;chr&gt;, fst_hsptz_dt &lt;chr&gt;, edc_add_rt &lt;dbl&gt;,
## #   spcf_sym_type &lt;chr&gt;, ed_rc_tot_amt &lt;dbl&gt;, edc_sba &lt;dbl&gt;,
## #   edc_insur_brdn_amt &lt;dbl&gt;, std_yyyy &lt;chr&gt;</code></pre>
<ul>
<li>방법3</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="chapter6.html#cb13-1" aria-hidden="true" tabindex="-1"></a>t20_if2 <span class="ot">&lt;-</span> t20 <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="chapter6.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition =</span> <span class="fu">substr</span>(sick_sym1,<span class="dv">1</span>,<span class="dv">3</span>)<span class="sc">==</span><span class="st">&#39;E11&#39;</span> <span class="sc">&amp;</span> mcare_subj_cd<span class="sc">==</span><span class="st">&#39;01&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="chapter6.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition)</span>
<span id="cb13-4"><a href="chapter6.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="chapter6.html#cb13-5" aria-hidden="true" tabindex="-1"></a>t20_if2</span></code></pre></div>
<pre><code>## # A tibble: 2,174 x 23
##    rn_indi rn_key        rn_inst mdcare_strt_dt form_cd mcare_subj_cd sick_sym1
##      &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    
##  1  819628 2002100385297   99662 20021025       03      01            E11      
##  2  663811 2002090160999  108535 20020929       03      01            E11      
##  3  819628 2002090153862   99662 20020907       03      01            E11      
##  4  490204 2002040486087   36298 20020416       03      01            E11      
##  5  490204 2002020191323   36298 20020214       03      01            E11      
##  6  490204 2002030200247   36298 20020316       03      01            E11      
##  7  490204 2002050098890   36298 20020514       03      01            E11      
##  8  490204 2002070043518   36298 20020715       03      01            E11      
##  9  490204 2002100739596   36298 20021030       03      01            E11      
## 10  490204 2002080663820   36298 20020831       03      01            E11      
## # ... with 2,164 more rows, and 16 more variables: sick_sym2 &lt;chr&gt;,
## #   hsptz_path_type &lt;chr&gt;, ofij_type &lt;chr&gt;, oprtn_yn &lt;chr&gt;,
## #   mdcare_dd_cnt &lt;dbl&gt;, vshsp_dd_cnt &lt;dbl&gt;, tot_prsc_dd_cnt &lt;dbl&gt;,
## #   mcare_rslt_type &lt;chr&gt;, fst_hsptz_dt &lt;chr&gt;, edc_add_rt &lt;dbl&gt;,
## #   spcf_sym_type &lt;chr&gt;, ed_rc_tot_amt &lt;dbl&gt;, edc_sba &lt;dbl&gt;,
## #   edc_insur_brdn_amt &lt;dbl&gt;, std_yyyy &lt;chr&gt;, condition &lt;lgl&gt;</code></pre>
<p>결과를 살펴보면 총 135,524개의 명세서 중에서 ‘E11’이 주상병이면서 진료과목코드 내과인 명세서는 2,174개가 선택되어 t20_if2 데이터셋이 구성된다.</p>
<p>조건문에서 사용되는 조건 연산자와 논리 연산자는 다음과 같다.</p>
<pre><code>= 같다 != 같지 않다
&lt;= 작거나 같다 &gt;= 크거나 같다 &lt; 작다 &gt; 크다
&amp; 논리곱  | 논리합
! 아니다</code></pre>
</div>
<div id="특정-조건을-만족하는-관찰값-삭제하기" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> 특정 조건을 만족하는 관찰값 삭제하기</h2>
<p>특정 조건을 만족하는 개체를 삭제하는 방법은 조건 결과에 부정연산자 !을 붙이거나 조건의 결과가 위치(location)을 나타내는 값이라면 ’-’를 붙여 삭제한다.</p>
<pre><code>1. 새로운 데이터 셋 = 기존 데이터 셋[!조건,]
2. 새로운 데이터 셋 = subset(기존 데이터셋, !조건)
3. 새로운 데이터 셋 = filter(기존 데이터셋, !조건)</code></pre>
<p>t40 데이터셋에서 상병분류구분코드(sick_clsf_type)를 이용하여 주상병(‘1’)만 남기고 부상병(‘2’) 및 배제된 상병(‘3’) 그리고 결측값을 가진 개체를 제거한 다음 t40_delete 데이터셋에 저장해보자.</p>
<ul>
<li>방법1</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="chapter6.html#cb17-1" aria-hidden="true" tabindex="-1"></a>t40_delete <span class="ot">&lt;-</span> t40[<span class="sc">!</span>t40<span class="sc">$</span>sick_clsf_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>, <span class="cn">NA</span>),]</span>
<span id="cb17-2"><a href="chapter6.html#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="chapter6.html#cb17-3" aria-hidden="true" tabindex="-1"></a>t40_delete</span></code></pre></div>
<pre><code>## # A tibble: 101,561 x 8
##    rn_indi rn_key        mdcare_strt_dt form_cd mcex_sick_sym detail_tmsg_subj_~
##      &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;             
##  1  519172 2005120611781 20051219       03      J418          &lt;NA&gt;              
##  2  519172 2005121419493 20051220       03      J418          &lt;NA&gt;              
##  3  657227 2005090402664 20050921       02      G_            &lt;NA&gt;              
##  4  138307 2005080033134 20050803       03      M159          09                
##  5   41309 2006100747809 20061030       03      H810          &lt;NA&gt;              
##  6  519172 2006101379218 20061016       03      B353          &lt;NA&gt;              
##  7   41309 2006090368522 20060918       03      H810          &lt;NA&gt;              
##  8  519172 2006070065999 20060715       03      J039          &lt;NA&gt;              
##  9  519172 2006070775639 20060722       03      J039          &lt;NA&gt;              
## 10  134307 2006051439329 20060520       03      J040          &lt;NA&gt;              
## # ... with 101,551 more rows, and 2 more variables: sick_clsf_type &lt;chr&gt;,
## #   std_yyyy &lt;chr&gt;</code></pre>
<ul>
<li>방법2</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="chapter6.html#cb19-1" aria-hidden="true" tabindex="-1"></a>t40_delete <span class="ot">&lt;-</span> <span class="fu">subset</span>(t40, <span class="sc">!</span>sick_clsf_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>, <span class="cn">NA</span>))</span>
<span id="cb19-2"><a href="chapter6.html#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="chapter6.html#cb19-3" aria-hidden="true" tabindex="-1"></a>t40_delete</span></code></pre></div>
<pre><code>## # A tibble: 101,561 x 8
##    rn_indi rn_key        mdcare_strt_dt form_cd mcex_sick_sym detail_tmsg_subj_~
##      &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;             
##  1  519172 2005120611781 20051219       03      J418          &lt;NA&gt;              
##  2  519172 2005121419493 20051220       03      J418          &lt;NA&gt;              
##  3  657227 2005090402664 20050921       02      G_            &lt;NA&gt;              
##  4  138307 2005080033134 20050803       03      M159          09                
##  5   41309 2006100747809 20061030       03      H810          &lt;NA&gt;              
##  6  519172 2006101379218 20061016       03      B353          &lt;NA&gt;              
##  7   41309 2006090368522 20060918       03      H810          &lt;NA&gt;              
##  8  519172 2006070065999 20060715       03      J039          &lt;NA&gt;              
##  9  519172 2006070775639 20060722       03      J039          &lt;NA&gt;              
## 10  134307 2006051439329 20060520       03      J040          &lt;NA&gt;              
## # ... with 101,551 more rows, and 2 more variables: sick_clsf_type &lt;chr&gt;,
## #   std_yyyy &lt;chr&gt;</code></pre>
<ul>
<li>방법3</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="chapter6.html#cb21-1" aria-hidden="true" tabindex="-1"></a>t40_delete <span class="ot">&lt;-</span> t40 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>t40<span class="sc">$</span>sick_clsf_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>, <span class="cn">NA</span>))</span>
<span id="cb21-2"><a href="chapter6.html#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="chapter6.html#cb21-3" aria-hidden="true" tabindex="-1"></a>t40_delete</span></code></pre></div>
<pre><code>## # A tibble: 101,561 x 8
##    rn_indi rn_key        mdcare_strt_dt form_cd mcex_sick_sym detail_tmsg_subj_~
##      &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;             
##  1  519172 2005120611781 20051219       03      J418          &lt;NA&gt;              
##  2  519172 2005121419493 20051220       03      J418          &lt;NA&gt;              
##  3  657227 2005090402664 20050921       02      G_            &lt;NA&gt;              
##  4  138307 2005080033134 20050803       03      M159          09                
##  5   41309 2006100747809 20061030       03      H810          &lt;NA&gt;              
##  6  519172 2006101379218 20061016       03      B353          &lt;NA&gt;              
##  7   41309 2006090368522 20060918       03      H810          &lt;NA&gt;              
##  8  519172 2006070065999 20060715       03      J039          &lt;NA&gt;              
##  9  519172 2006070775639 20060722       03      J039          &lt;NA&gt;              
## 10  134307 2006051439329 20060520       03      J040          &lt;NA&gt;              
## # ... with 101,551 more rows, and 2 more variables: sick_clsf_type &lt;chr&gt;,
## #   std_yyyy &lt;chr&gt;</code></pre>
<p>여기서 ’%in%’는 여러개의 조건을 동시에 검색할때 유용하게 쓰이는 명령문이다.</p>
<p>결과를 살펴보면 bb.t40의 개체수는 340,596개로 이 중 상병분류구분코드(sick_clsf_type) 값이 ’1‘인 101,561개의 개체값을 남기고 모두 삭제되었다는 것을 알 수 있다.</p>
</div>
<div id="조건문-활용하기" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> 조건문 활용하기</h2>
<p>R에서 조건문은 if와 ifelse가 사용이 되며 이 중 if 문은 단계적 연산에 주로 사용된다. 데이터 전처리와 같이 변수단위로 조건을 거는 경우에는 ifelse문이 더 적합하다. ifese문의 기본 사용 방법은 다음과 같다.</p>
<pre><code>ifelse(조건,실행문1,실행문2)</code></pre>
<p>ifelse문은 조건이 참(TRUE)일때 실행문1을 시행하며 거짓(FALSE)일때 실행문2를 시행한다.</p>
<p>다음과 같은 프로그램을 살펴보자.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="chapter6.html#cb24-1" aria-hidden="true" tabindex="-1"></a>t30_if <span class="ot">&lt;-</span> t30</span>
<span id="cb24-2"><a href="chapter6.html#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="chapter6.html#cb24-3" aria-hidden="true" tabindex="-1"></a>t30_if<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">ymd</span>(t30<span class="sc">$</span>mdcare_strt_dt)</span>
<span id="cb24-4"><a href="chapter6.html#cb24-4" aria-hidden="true" tabindex="-1"></a>t30_if <span class="ot">&lt;-</span> <span class="fu">subset</span>(t30_if,<span class="fu">mdy</span>(<span class="dv">05252015</span>) <span class="sc">&lt;=</span> date <span class="sc">&amp;</span>  date <span class="sc">&lt;=</span> <span class="fu">mdy</span>(<span class="dv">05302015</span>) <span class="sc">&amp;</span> mcexp_type_cd <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span>, <span class="st">&#39;3&#39;</span>))</span>
<span id="cb24-5"><a href="chapter6.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="chapter6.html#cb24-6" aria-hidden="true" tabindex="-1"></a>t30_if<span class="sc">$</span>drugcost <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(t30_if<span class="sc">$</span>mcexp_type_cd<span class="sc">==</span><span class="st">&#39;3&#39;</span>, t30_if<span class="sc">$</span>uprc<span class="sc">*</span>t30_if<span class="sc">$</span>dd1_mqty_freq<span class="sc">*</span>t30_if<span class="sc">$</span>tot_mcnt, <span class="dv">0</span> )</span>
<span id="cb24-7"><a href="chapter6.html#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="chapter6.html#cb24-8" aria-hidden="true" tabindex="-1"></a>t30_if[<span class="fu">c</span>(<span class="st">&quot;rn_indi&quot;</span>,<span class="st">&quot;date&quot;</span>,<span class="st">&quot;mcexp_type_cd&quot;</span>,<span class="st">&quot;uprc&quot;</span>,<span class="st">&quot;dd1_mqty_freq&quot;</span>,<span class="st">&quot;tot_mcnt&quot;</span>,<span class="st">&quot;drugcost&quot;</span>)]</span></code></pre></div>
<pre><code>## # A tibble: 569 x 7
##    rn_indi date       mcexp_type_cd  uprc dd1_mqty_freq tot_mcnt drugcost
##      &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1  952290 2015-05-26 1             14000             1        1        0
##  2  196293 2015-05-26 1             14000             1        1        0
##  3  517489 2015-05-28 1             17470             1        1        0
##  4  124047 2015-05-26 1             10000             1        1        0
##  5  196293 2015-05-28 1             10000             1        1        0
##  6  196293 2015-05-30 1             10000             1        1        0
##  7  299704 2015-05-30 1             10000             1        1        0
##  8  880522 2015-05-30 1             10000             1        1        0
##  9  196293 2015-05-26 1               170             1        1        0
## 10  916515 2015-05-26 1               170             1        1        0
## # ... with 559 more rows</code></pre>
<p>위의 프로그램은 t30 데이터셋으로부터 요양개시일자(mdcare_strt_dt)를 날짜 변수 date로 만들고 요양개시일자가 2015년 5월 25일부터 2015년 5월 30일까지이면서 동시에 진료비구분코드(mcexp_type_cd)가 기본진료료(’1‘) 또는 약품비(’3‘)인 개체만 남겨서 t30_if 데이터셋을 구성한다. 이때 진료비구분코드(mcexp_type_cd)가 약품비(’3’)라면, drugcost 변수를 생성하라는 조건문이 사용되었으며 drugcost는 단가(uprc)<em>1일투여량 또는 횟수(dd1_mqty_freq)</em>총투여일수 또는 실시횟수(tot_mcnt) 형태로 산출된다. drugcost는 조건이 진료비구분코드(mcexp_type_cd)가 약품비(’3’) 일 때만 산출되므로 약품비(‘3’)가 아닌 다른 진료비구분코드가 있다면(여기서는 기본진료료(‘1’)) 0으로 대체하라는 명령문이다.</p>
<p>이는 다음과 같이 시행가능하다.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="chapter6.html#cb26-1" aria-hidden="true" tabindex="-1"></a>t30_if <span class="ot">&lt;-</span> t30 <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="chapter6.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date=</span><span class="fu">ymd</span>(t30<span class="sc">$</span>mdcare_strt_dt)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="chapter6.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">mdy</span>(<span class="dv">05252015</span>) <span class="sc">&lt;=</span> date <span class="sc">&amp;</span>  date <span class="sc">&lt;=</span> <span class="fu">mdy</span>(<span class="dv">05302015</span>) <span class="sc">&amp;</span> mcexp_type_cd <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span>, <span class="st">&#39;3&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="chapter6.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">drugcost=</span><span class="fu">ifelse</span>(mcexp_type_cd<span class="sc">==</span><span class="st">&#39;3&#39;</span>,uprc<span class="sc">*</span>dd1_mqty_freq<span class="sc">*</span>tot_mcnt,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="chapter6.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rn_indi, date, mcexp_type_cd,uprc,dd1_mqty_freq,tot_mcnt,drugcost)</span>
<span id="cb26-6"><a href="chapter6.html#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="chapter6.html#cb26-7" aria-hidden="true" tabindex="-1"></a>t30_if</span></code></pre></div>
<pre><code>## # A tibble: 569 x 7
##    rn_indi date       mcexp_type_cd  uprc dd1_mqty_freq tot_mcnt drugcost
##      &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1  952290 2015-05-26 1             14000             1        1        0
##  2  196293 2015-05-26 1             14000             1        1        0
##  3  517489 2015-05-28 1             17470             1        1        0
##  4  124047 2015-05-26 1             10000             1        1        0
##  5  196293 2015-05-28 1             10000             1        1        0
##  6  196293 2015-05-30 1             10000             1        1        0
##  7  299704 2015-05-30 1             10000             1        1        0
##  8  880522 2015-05-30 1             10000             1        1        0
##  9  196293 2015-05-26 1               170             1        1        0
## 10  916515 2015-05-26 1               170             1        1        0
## # ... with 559 more rows</code></pre>
<p>결과를 살펴보면 요양개시일자(mdcare_strt_dt)가 2015년 5월 25일부터 2015년 5월 30일 사이에 있으면서 진료비구분코드(mcexp_type_cd)가 기본진료료(’1‘) 또는 약품비(’3‘)인 개체만 남아있으며, 진료비구분코드가 약품비인 경우에 drugcost 값이 존재하고 기본진료료인 경우에는 drugcost가 0인 것을 알 수 있다.</p>
</div>
<div id="조건문-일반화하기" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> 조건문 일반화하기</h2>
<p>일반적으로 전체 개체가 여러 조건으로 쪼개어져서 명령문을 실행해야 하는 경우 dplyr 패키지의 case_when() 함수를 이용한다. 사용 방법은 다음과 같다.</p>
<pre><code>case_when(
조건1 ~ 실행1,
조건2 ~ 실행2,
TRUE ~ 실행3
) </code></pre>
<p>이와 같은 경우 조건1이 참인 경우 실행1을 시행하고, 조건문1이 참인 개체를 제외하고 나머지 중에서 조건2가 참인 경우 실행2를 시행한다. 마찬가지로 조건1과 2가 참인 경우를 제외한 개체중에서 실행3을 시행한다. 여기서 마지막 조건은 TRUE로 고정된다.</p>
<p>이와 같은 형태는 세분화된 조건에 따라 새로운 변수를 생성하는 것뿐만 아니라 그룹(group) 변수를 생성할 때도 유용하게 쓰인다.</p>
<p>death 데이터셋으로부터 2022년을 기준으로 나이 변수(age)를 생성하고, 나이를 기준으로 다음과 같이 그룹화하여 agegroup 변수를 생성한다고 가정해보자.</p>
<table>
<thead>
<tr class="header">
<th align="center">age</th>
<th align="center">agegroup</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">age &lt;= 60</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">61 &lt;= age &lt;= 70</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">71 &lt;= age &lt;= 80</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">age &gt;80</td>
<td align="center">4</td>
</tr>
</tbody>
</table>
<p>여기서 나이가 60세 이하인 사람들은 agegroup 값이 1로 할당된다. 이때 age 값이 결측이라면(특히 수치형 변수에서 결측값은 가장 작은 값으로 판단하기 때문에), 60세 이하에는 결측값도 포함되므로 결측값 처리는 따로 해주는 것이 좋다. agegroup 변수 생성을 위한 프로그램은 다음과 같다</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="chapter6.html#cb29-1" aria-hidden="true" tabindex="-1"></a>death_age <span class="ot">&lt;-</span> death <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="chapter6.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">birthyear=</span><span class="fu">as.numeric</span>(<span class="fu">substr</span>(bth_yyyy,<span class="dv">1</span>,<span class="dv">4</span>)), <span class="at">age=</span><span class="dv">2022</span><span class="sc">-</span>birthyear,</span>
<span id="cb29-3"><a href="chapter6.html#cb29-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">agegroup=</span><span class="fu">case_when</span>(age <span class="sc">&lt;=</span> <span class="dv">60</span> <span class="sc">~</span> <span class="dv">1</span>, age <span class="sc">&lt;=</span> <span class="dv">70</span> <span class="sc">~</span> <span class="dv">2</span>, age <span class="sc">&lt;=</span> <span class="dv">80</span> <span class="sc">~</span> <span class="dv">3</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">4</span>))</span>
<span id="cb29-4"><a href="chapter6.html#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="chapter6.html#cb29-5" aria-hidden="true" tabindex="-1"></a>death_age</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 8
##    rn_indi bth_yyyy dth_yyyymm cod1  cod2  birthyear   age agegroup
##      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
##  1  888234 1959     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1959    63        2
##  2  572549 1971     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1971    51        1
##  3  720544 1960     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1960    62        2
##  4  964637 1960     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1960    62        2
##  5  915731 1970     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1970    52        1
##  6   84322 1962     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1962    60        1
##  7  859599 1960     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1960    62        2
##  8  262452 1968     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1968    54        1
##  9   69398 1959     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1959    63        2
## 10  535689 1965     &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       1965    57        1
## # ... with 990 more rows</code></pre>
<p>또 다른 예로 문자형 카테고리 변수를 만드는 예제를 살펴보자. t20 데이터셋에서 심결요양급여비용총액(ed_rc_tot_amt)을 기준으로 다음과 같은 costlevel 변수를 생성시킨다고 가정해보자.</p>
<table>
<thead>
<tr class="header">
<th align="center">ed_rc_tot_amt</th>
<th align="center">costlevel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">ed_rc_tot_amt &lt;= 10000</td>
<td align="center">low</td>
</tr>
<tr class="even">
<td align="center">10000 &lt; ed_rc_tot_amt &lt;= 20000</td>
<td align="center">medium</td>
</tr>
<tr class="odd">
<td align="center">ed_rc_tot_amt &gt; 20000</td>
<td align="center">high</td>
</tr>
</tbody>
</table>
<p>costlevel 변수를 생성하여 t20_costlevel 데이터셋을 생성하는 프로그램은 다음과 같다.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="chapter6.html#cb31-1" aria-hidden="true" tabindex="-1"></a>t20_costlevel <span class="ot">&lt;-</span> t20 <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="chapter6.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">costlevel=</span><span class="fu">case_when</span>(</span>
<span id="cb31-3"><a href="chapter6.html#cb31-3" aria-hidden="true" tabindex="-1"></a>    ed_rc_tot_amt <span class="sc">&lt;=</span> <span class="dv">10000</span> <span class="sc">~</span> <span class="st">&quot;low&quot;</span>,</span>
<span id="cb31-4"><a href="chapter6.html#cb31-4" aria-hidden="true" tabindex="-1"></a>    ed_rc_tot_amt <span class="sc">&lt;=</span> <span class="dv">20000</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb31-5"><a href="chapter6.html#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;high&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="chapter6.html#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rn_indi, ed_rc_tot_amt, costlevel)</span>
<span id="cb31-7"><a href="chapter6.html#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="chapter6.html#cb31-8" aria-hidden="true" tabindex="-1"></a>t20_costlevel</span></code></pre></div>
<pre><code>## # A tibble: 135,524 x 3
##    rn_indi ed_rc_tot_amt costlevel
##      &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;    
##  1  746491         10590 medium   
##  2  848340         10590 medium   
##  3  992522         10590 medium   
##  4  543044         10590 medium   
##  5  928716         10590 medium   
##  6  633585         10590 medium   
##  7  706339         10590 medium   
##  8  515572         10590 medium   
##  9   71582         10590 medium   
## 10  701404         10590 medium   
## # ... with 135,514 more rows</code></pre>
<p>만약 결측값이 존재하면, 결측값은 조건에 포함되지 않기 때문에 제일 마지막 조건으로 처리가 된다. 따라서 위의 경우에는 ed_rc_tot_amt에 결측값이 있다면 “high”로 분류된다. 따라서 결측값이 존재한다면 이러한 오류를 방지하기 위해 결측값을 위한 조건을 따로 넣어주는것이 좋다.</p>
<p>결측값인지 아닌지 확인하는 방법은 다음과 같다.</p>
<pre><code>is.na(x)</code></pre>
<!-------- End ------------>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter5.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter7.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rmanual.pdf", "rmanual.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
