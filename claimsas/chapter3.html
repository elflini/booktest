<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Set문 활용 | Insurance Claims Data Analysis with SAS</title>
  <meta name="description" content="This is a SAS manual for analysis of insurance claims data" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Set문 활용 | Insurance Claims Data Analysis with SAS" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a SAS manual for analysis of insurance claims data" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Set문 활용 | Insurance Claims Data Analysis with SAS" />
  
  <meta name="twitter:description" content="This is a SAS manual for analysis of insurance claims data" />
  

<meta name="author" content="Jin Hyun Nam" />


<meta name="date" content="2021-12-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter2.html"/>
<link rel="next" href="chapter4.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Claims Data Analysis with SAS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>머리말</a></li>
<li class="chapter" data-level="1" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i><b>1</b> SAS 개요</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter1.html"><a href="chapter1.html#sas"><i class="fa fa-check"></i><b>1.1</b> SAS?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="chapter1.html"><a href="chapter1.html#sas-프로그램-구성"><i class="fa fa-check"></i><b>1.1.1</b> SAS 프로그램 구성</a></li>
<li class="chapter" data-level="1.1.2" data-path="chapter1.html"><a href="chapter1.html#sas-프로그램-장점"><i class="fa fa-check"></i><b>1.1.2</b> SAS 프로그램 장점</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="chapter1.html"><a href="chapter1.html#sas-구성요소"><i class="fa fa-check"></i><b>1.2</b> SAS 구성요소</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chapter1.html"><a href="chapter1.html#sas-화면구성"><i class="fa fa-check"></i><b>1.2.1</b> SAS 화면구성</a></li>
<li class="chapter" data-level="1.2.2" data-path="chapter1.html"><a href="chapter1.html#메뉴"><i class="fa fa-check"></i><b>1.2.2</b> 메뉴</a></li>
<li class="chapter" data-level="1.2.3" data-path="chapter1.html"><a href="chapter1.html#도구-모음"><i class="fa fa-check"></i><b>1.2.3</b> 도구 모음</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chapter1.html"><a href="chapter1.html#sas-기본-형식"><i class="fa fa-check"></i><b>1.3</b> SAS 기본 형식</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter2.html"><a href="chapter2.html"><i class="fa fa-check"></i><b>2</b> 자료의 입출력</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapter2.html"><a href="chapter2.html#자료의-입력"><i class="fa fa-check"></i><b>2.1</b> 자료의 입력</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chapter2.html"><a href="chapter2.html#cards문-이용"><i class="fa fa-check"></i><b>2.1.1</b> CARDS문 이용</a></li>
<li class="chapter" data-level="2.1.2" data-path="chapter2.html"><a href="chapter2.html#infile-구문-이용"><i class="fa fa-check"></i><b>2.1.2</b> INFILE 구문 이용</a></li>
<li class="chapter" data-level="2.1.3" data-path="chapter2.html"><a href="chapter2.html#위저드wizard-이용"><i class="fa fa-check"></i><b>2.1.3</b> 위저드(Wizard) 이용</a></li>
<li class="chapter" data-level="2.1.4" data-path="chapter2.html"><a href="chapter2.html#proc-import-이용"><i class="fa fa-check"></i><b>2.1.4</b> PROC IMPORT 이용</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chapter2.html"><a href="chapter2.html#자료의-출력"><i class="fa fa-check"></i><b>2.2</b> 자료의 출력</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chapter2.html"><a href="chapter2.html#위저드-이용"><i class="fa fa-check"></i><b>2.2.1</b> 위저드 이용</a></li>
<li class="chapter" data-level="2.2.2" data-path="chapter2.html"><a href="chapter2.html#proc-export-이용"><i class="fa fa-check"></i><b>2.2.2</b> PROC EXPORT 이용</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chapter2.html"><a href="chapter2.html#공단-표본코호트-자료-불러오기"><i class="fa fa-check"></i><b>2.3</b> 공단 표본코호트 자료 불러오기</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chapter2.html"><a href="chapter2.html#자격-db-자격-및-보험료테이블"><i class="fa fa-check"></i><b>2.3.1</b> 자격 DB – 자격 및 보험료테이블</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter2.html"><a href="chapter2.html#사망-db-출생-및-사망테이블"><i class="fa fa-check"></i><b>2.3.2</b> 사망 DB – 출생 및 사망테이블</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter2.html"><a href="chapter2.html#table-20---진료-db-명세서"><i class="fa fa-check"></i><b>2.3.3</b> Table 20 - 진료 DB 명세서</a></li>
<li class="chapter" data-level="2.3.4" data-path="chapter2.html"><a href="chapter2.html#table-30-진료-db-진료내역"><i class="fa fa-check"></i><b>2.3.4</b> Table 30 – 진료 DB 진료내역</a></li>
<li class="chapter" data-level="2.3.5" data-path="chapter2.html"><a href="chapter2.html#table-40-진료-db-상병내역"><i class="fa fa-check"></i><b>2.3.5</b> Table 40 – 진료 DB 상병내역</a></li>
<li class="chapter" data-level="2.3.6" data-path="chapter2.html"><a href="chapter2.html#table-60-진료-db-처방전교부-상세내역"><i class="fa fa-check"></i><b>2.3.6</b> Table 60 – 진료 DB 처방전교부 상세내역</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter3.html"><a href="chapter3.html"><i class="fa fa-check"></i><b>3</b> Set문 활용</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter3.html"><a href="chapter3.html#변수에-이름-붙이기"><i class="fa fa-check"></i><b>3.1</b> 변수에 이름 붙이기</a></li>
<li class="chapter" data-level="3.2" data-path="chapter3.html"><a href="chapter3.html#특정-변수를-취하여-새로운-데이터셋-만들기"><i class="fa fa-check"></i><b>3.2</b> 특정 변수를 취하여 새로운 데이터셋 만들기</a></li>
<li class="chapter" data-level="3.3" data-path="chapter3.html"><a href="chapter3.html#특정-변수를-제외하고-새로운-데이터셋-만들기"><i class="fa fa-check"></i><b>3.3</b> 특정 변수를 제외하고 새로운 데이터셋 만들기</a></li>
<li class="chapter" data-level="3.4" data-path="chapter3.html"><a href="chapter3.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>3.4</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="3.5" data-path="chapter3.html"><a href="chapter3.html#특정-관찰값부터-시작하여-데이터셋-만들기"><i class="fa fa-check"></i><b>3.5</b> 특정 관찰값부터 시작하여 데이터셋 만들기</a></li>
<li class="chapter" data-level="3.6" data-path="chapter3.html"><a href="chapter3.html#기존-데이터셋으로-다수의-새로운-데이터셋-만들기"><i class="fa fa-check"></i><b>3.6</b> 기존 데이터셋으로 다수의 새로운 데이터셋 만들기</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter4.html"><a href="chapter4.html"><i class="fa fa-check"></i><b>4</b> 새로운 변수 생성</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter4.html"><a href="chapter4.html#기존-변수의-값-바꾸기"><i class="fa fa-check"></i><b>4.1</b> 기존 변수의 값 바꾸기</a></li>
<li class="chapter" data-level="4.2" data-path="chapter4.html"><a href="chapter4.html#새로운-변수-만들기"><i class="fa fa-check"></i><b>4.2</b> 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.3" data-path="chapter4.html"><a href="chapter4.html#round-함수를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.3</b> ROUND 함수를 이용한 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.4" data-path="chapter4.html"><a href="chapter4.html#숫자-변수를-문자-변수로-문자-변수를-숫자-변수로"><i class="fa fa-check"></i><b>4.4</b> 숫자 변수를 문자 변수로, 문자 변수를 숫자 변수로</a></li>
<li class="chapter" data-level="4.5" data-path="chapter4.html"><a href="chapter4.html#substr-함수를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.5</b> Substr 함수를 이용한 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.6" data-path="chapter4.html"><a href="chapter4.html#날짜-함수를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.6</b> 날짜 함수를 이용한 새로운 변수 만들기</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="chapter4.html"><a href="chapter4.html#날짜-변수의-생성"><i class="fa fa-check"></i><b>4.6.1</b> 날짜 변수의 생성</a></li>
<li class="chapter" data-level="4.6.2" data-path="chapter4.html"><a href="chapter4.html#날짜-계산"><i class="fa fa-check"></i><b>4.6.2</b> 날짜 계산</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="chapter4.html"><a href="chapter4.html#누적값을-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.7</b> 누적값을 이용한 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.8" data-path="chapter4.html"><a href="chapter4.html#lag과-dif를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.8</b> Lag과 Dif를 이용한 새로운 변수 만들기</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter5.html"><a href="chapter5.html"><i class="fa fa-check"></i><b>5</b> 조건문</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter5.html"><a href="chapter5.html#특정-조건을-만족하는-관찰값-선택하기"><i class="fa fa-check"></i><b>5.1</b> 특정 조건을 만족하는 관찰값 선택하기</a></li>
<li class="chapter" data-level="5.2" data-path="chapter5.html"><a href="chapter5.html#특정-조건을-만족하는-관찰값-삭제하기"><i class="fa fa-check"></i><b>5.2</b> 특정 조건을 만족하는 관찰값 삭제하기</a></li>
<li class="chapter" data-level="5.3" data-path="chapter5.html"><a href="chapter5.html#조건문-활용하기"><i class="fa fa-check"></i><b>5.3</b> 조건문 활용하기</a></li>
<li class="chapter" data-level="5.4" data-path="chapter5.html"><a href="chapter5.html#조건문-확장하기"><i class="fa fa-check"></i><b>5.4</b> 조건문 확장하기</a></li>
<li class="chapter" data-level="5.5" data-path="chapter5.html"><a href="chapter5.html#조건문-일반화하기"><i class="fa fa-check"></i><b>5.5</b> 조건문 일반화하기</a></li>
<li class="chapter" data-level="5.6" data-path="chapter5.html"><a href="chapter5.html#output문을-이용한-여러-데이터셋-생성하기"><i class="fa fa-check"></i><b>5.6</b> Output문을 이용한 여러 데이터셋 생성하기</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chapter6.html"><a href="chapter6.html"><i class="fa fa-check"></i><b>6</b> 자료의 정렬</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chapter6.html"><a href="chapter6.html#하나의-변수에-의한-관찰값의-정렬"><i class="fa fa-check"></i><b>6.1</b> 하나의 변수에 의한 관찰값의 정렬</a></li>
<li class="chapter" data-level="6.2" data-path="chapter6.html"><a href="chapter6.html#여러-개의-변수에-의한-관찰값의-정렬"><i class="fa fa-check"></i><b>6.2</b> 여러 개의 변수에 의한 관찰값의 정렬</a></li>
<li class="chapter" data-level="6.3" data-path="chapter6.html"><a href="chapter6.html#first-변수와-last-변수-사용하기"><i class="fa fa-check"></i><b>6.3</b> First 변수와 Last 변수 사용하기</a></li>
<li class="chapter" data-level="6.4" data-path="chapter6.html"><a href="chapter6.html#동일한-관찰값의-제거"><i class="fa fa-check"></i><b>6.4</b> 동일한 관찰값의 제거</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapter7.html"><a href="chapter7.html"><i class="fa fa-check"></i><b>7</b> 반복문</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chapter7.html"><a href="chapter7.html#단순-do문"><i class="fa fa-check"></i><b>7.1</b> 단순 DO문</a></li>
<li class="chapter" data-level="7.2" data-path="chapter7.html"><a href="chapter7.html#반복-do문"><i class="fa fa-check"></i><b>7.2</b> 반복 DO문</a></li>
<li class="chapter" data-level="7.3" data-path="chapter7.html"><a href="chapter7.html#다중-반복-do문"><i class="fa fa-check"></i><b>7.3</b> 다중 반복 DO문</a></li>
<li class="chapter" data-level="7.4" data-path="chapter7.html"><a href="chapter7.html#array문의-활용"><i class="fa fa-check"></i><b>7.4</b> ARRAY문의 활용</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chapter8.html"><a href="chapter8.html"><i class="fa fa-check"></i><b>8</b> 데이터셋 합치기</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chapter8.html"><a href="chapter8.html#set문을-이용한-데이터셋-합치기"><i class="fa fa-check"></i><b>8.1</b> SET문을 이용한 데이터셋 합치기</a></li>
<li class="chapter" data-level="8.2" data-path="chapter8.html"><a href="chapter8.html#merge문을-이용한-데이터셋-합치기"><i class="fa fa-check"></i><b>8.2</b> MERGE문을 이용한 데이터셋 합치기</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chapter9.html"><a href="chapter9.html"><i class="fa fa-check"></i><b>9</b> SQL과 MACRO</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chapter9.html"><a href="chapter9.html#proc-sql-기본-구조"><i class="fa fa-check"></i><b>9.1</b> PROC SQL 기본 구조</a></li>
<li class="chapter" data-level="9.2" data-path="chapter9.html"><a href="chapter9.html#단일-데이터셋-다루기"><i class="fa fa-check"></i><b>9.2</b> 단일 데이터셋 다루기</a></li>
<li class="chapter" data-level="9.3" data-path="chapter9.html"><a href="chapter9.html#여러-데이터셋-다루기"><i class="fa fa-check"></i><b>9.3</b> 여러 데이터셋 다루기</a></li>
<li class="chapter" data-level="9.4" data-path="chapter9.html"><a href="chapter9.html#macro"><i class="fa fa-check"></i><b>9.4</b> MACRO</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chapter10.html"><a href="chapter10.html"><i class="fa fa-check"></i><b>10</b> Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#arithmetic-functions"><i class="fa fa-check"></i>Arithmetic Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#character-functions"><i class="fa fa-check"></i>Character Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#date-and-time-functions"><i class="fa fa-check"></i>Date and Time Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#mathematical-functions"><i class="fa fa-check"></i>Mathematical Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#noncentrality-functions"><i class="fa fa-check"></i>Noncentrality Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#probability-and-density-functions"><i class="fa fa-check"></i>Probability and Density Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#quantile-functions"><i class="fa fa-check"></i>Quantile Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#sample-statistics-functions"><i class="fa fa-check"></i>Sample Statistics Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#state-and-zip-code-functions"><i class="fa fa-check"></i>State and ZIP Code Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#trigonometric-and-hyperbolic-functions"><i class="fa fa-check"></i>Trigonometric and Hyperbolic Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#truncation-functions"><i class="fa fa-check"></i>Truncation Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#variable-information-functions"><i class="fa fa-check"></i>Variable Information Functions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Insurance Claims Data Analysis with SAS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter3" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Set문 활용</h1>
<div id="변수에-이름-붙이기" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> 변수에 이름 붙이기</h2>
<p>LABEL문은 변수에 대한 설명을 붙이고자 할 때 사용되며 변수명=’내용’으로 사용한다. 이때 LABEL 문의 내용은 공백을 포함하여 최대 40자(한글 20자)까지 가능하므로 변수에 대한 상세한 설명을 붙일 수 있다.</p>
<pre><code>libname bb &#39;D:\SAS\data&#39;;

data bb.t20_label;
set bb.t20;
label RN_INDI=&#39;개인고유번호&#39;
RN_KEY=&#39;청구고유번호&#39;
RN_INST=&#39;요양기관고유번호&#39;
;
run;</code></pre>
<p><img src="fig3/f1.jpg" /></p>
<p>SET 문은 기존에 만들어진 데이터셋을 참조 혹은 복사의 용도로 사용된다. 예를 들어 다음과 같은 명령문을 생각해보자.</p>
<pre><code>DATA T20_TEMP; SET BB.T20; RUN;</code></pre>
<p>이 명령문은 T20_TEMP라는 데이터셋을 WORK 라이브러리에 생성시키게 된다. 이때 BB라는 라이브러리에 있는 T20 데이터셋을 참조해서 그대로 복사하여 T20_TEMP 데이터셋을 생성시킨다.</p>
<p>위의 LABEL문 예제는 BB 라이브러리에 T20_LABEL 데이터셋을 생성시키는데, 이때 BB 라이브러리의 T20 데이터셋을 참조하여 세 변수 RN_INDI, RN_KEY, RN_INST에만 설명(label)을 붙이고 나머지 변수는 그대로 복사하여 BB 라이브러리에 T20_LABEL 데이터셋을 생성시킨다. 이때 LABEL 문은 변수 이름은 변화시키지 않고 부가 설명만 덧붙이는 역할을 한다. 다시 말해서, LABEL 문은 변수에 대한 설명을 붙이고자 할 때 사용되며 변수명=’내용’으로 사용한다. LABEL 문이 지정된 변수는 PROCEDURE (예를 들어 PROC PRINT) 다음에 변수명 대신 LABEL 문에서 지정된 ‘내용’을 변수명 대신 출력하게 된다.</p>
<p>SET 문을 이용하여 데이터셋을 생성할 때, 자기 자신의 데이터셋으로 덮어씌우는 것도 가능하다. 예를 들어 다음과 같은 명령문을 생각해보자.</p>
<pre><code>data bb.t20;
set bb.t20;
label RN_INDI=&#39;개인고유번호&#39;
RN_KEY=&#39;청구고유번호&#39;
RN_INST=&#39;요양기관고유번호&#39;
;
run;</code></pre>
<p>위의 명령문은 BB 라이브러리 T20 데이터셋을 불러와 데이터셋 내에 존재하는 3개의 변수 RN_INDI, RN_KEY, RN_INST에만 설명을 부여하고 나머지 변수는 그대로 복사하여 새로운 데이터셋 BB 라이브러리의 T20 데이터셋을 생성하게 된다. 즉, 원래 데이터셋인 T20에서 LABEL 문만 수행하여 추가한 경우와 같게 된다. 이와 같이 SET 문은 같은 데이터셋에서 추가적인 작업을 하는 것뿐만 아니라 추가적인 작업 여부와 상관없이 기존의 데이터셋을 바탕으로 새로운 데이터셋을 생성시키는 역할을 한다.</p>
</div>
<div id="특정-변수를-취하여-새로운-데이터셋-만들기" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> 특정 변수를 취하여 새로운 데이터셋 만들기</h2>
<p>SET 문을 이용하여 이미 생성된 데이터셋을 토대로 새로운 데이터셋을 생성할 때 특정 변수만 취하여 새로운 데이터셋을 만들고 싶을 때 KEEP 문을 이용한다. KEEP 문은 SET 문과 같이 사용하여 원하는 변수들로 구성된 데이터셋을 생성할 수 있으며, 전체 변수 중에서 취해야 하는 변수의 수가 적을 때 유용하게 사용된다. KEEP 문을 사용하는 방법은 다음과 같다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명 (KEEP= 변수명1 변수명2 ...);
RUN;</code></pre>
<p>KEEP 문을 SET 문에 붙여서 사용하는 방법 외에 두 구문을 따로 지정하는 방법도 가능하다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명;
KEEP 변수명1 변수명2 ...;
RUN;</code></pre>
<p>KEEP 문을 SET 문에 붙여서 사용할 때는 “=”을 이용하고 SET 문과 별도로 사용할 때는 “=”이 들어가지 않는다.</p>
<p>BB.T20 데이터셋에서 개인고유번호(RN_INDI), 청구고유번호(RN_KEY), 심결요양급여비용총액(ED_RC_TOT_AMT) 세 개의 변수만 남겨서 BB 라이브러리에 T20_KEEP 데이터셋을 생성시켜보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_keep;
set bb.t20 (keep= rn_indi rn_key ed_rc_tot_amt);
label RN_INDI=&#39;개인고유번호&#39;
RN_KEY=&#39;청구고유번호&#39;
ED_RC_TOT_AMT=&#39;심결요양급여비용총액&#39;;
run;

data bb.t20_keep;
set bb.t20;
label RN_INDI=&#39;개인고유번호&#39;
RN_KEY=&#39;청구고유번호&#39;
ED_RC_TOT_AMT=&#39;심결요양급여비용총액&#39;;
format rn_key 15.;
keep rn_indi rn_key ed_rc_tot_amt;
run;

proc print data=bb.t20_keep label; run;</code></pre>
<p><img src="fig3/f2.png" /></p>
<p>프로그램에서 LABEL 문이 KEEP 문과 같이 쓰일 수 있음을 알 수 있다. DATA step의 많은 명령문이 서로 상충하지 않는 한, 하나의 DATA step 구문 내에서 여러 명령어를 동시에 지정하는 것이 가능하다. FORMAT 구문은 변수에 출력형식(format)을 지정하여 변수의 정보를 수정한다. 여기서 [FORMAT RN_KEY 15.;]은 변수 RN_KEY이 15자리 값을 가질 수 있게 변경한다.
PROC PRINT는 SAS 데이터셋이 생성된 후에 데이터셋의 전체 혹은 일부의 변수와 관찰값을 출력하는 PROCEDURE이다. 이때 변수명 대신 해당 LABEL이 찍히도록 하려면 [PROC PRINT DATA=데이터셋명 LABEL;] 과같이 하면 된다. LABEL 옵션을 넣지 않으면 변수명으로 출력이 된다.</p>
</div>
<div id="특정-변수를-제외하고-새로운-데이터셋-만들기" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> 특정 변수를 제외하고 새로운 데이터셋 만들기</h2>
<p>KEEP 문이 원하는 변수를 취하는 명령문이라면, 반대로 원하지 않는 변수를 제거할 때 사용하는 명령문이 DROP 문이다. 따라서 KEEP 문은 남길 변수의 수가 적을 때 사용하는 것이 유용하고, DROP 문은 제거할 변수의 수가 적을 때 사용하는 것이 유용하다. DROP 문을 사용하는 방법은 다음과 같다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명 (DROP= 변수명1 변수명2 ...);
RUN;</code></pre>
<p>KEEP 문과 마찬가지로 DROP 문을 SET 문에 붙여서 사용하는 방법 외에 두 구문을 따로 지정하는 방법도 가능하다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명;
DROP 변수명1 변수명2 ...;
RUN;</code></pre>
<p>BB.T40 데이터셋에서 요양개시일자(MDCARE_STRT_DT), 서식코드(FORM_CD), 세부전문과목코드(DETAIL_TMSG_SUBJ_CD), 상병분류구분코드(SICK_CLSF_TYPE)을 제거하고 개인고유번호(RN_INDI), 청구고유번호(RN_KEY), 심결요양급여비용총액(ED_RC_TOT_AMT), 기준년도(STD_YYYY) 네 개의 변수만 남겨서 BB 라이브러리에 T40_DROP 데이터셋을 생성시켜보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t40_drop;
set bb.t40 (drop=mdcare_strt_dt form_cd detail_tmsg_subj_cd sick_clsf_type);
run;

data bb.t40_drop;
set bb.t40;
drop mdcare_strt_dt form_cd detail_tmsg_subj_cd sick_clsf_type;
format rn_key 15.;
run;

proc print data=bb.t40_drop label; run;</code></pre>
<p><img src="fig3/f3.png" /></p>
</div>
<div id="변수-이름-바꾸기" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> 변수 이름 바꾸기</h2>
<p>생성된 데이터셋의 변수 이름을 바꾸거나 새로운 데이터셋 생성시 다른 이름으로 변수를 저장해야 하는 경우 사용하는 명령문이 RENAME 이다. RENAME 문을 사용하는 방법은 다음과 같다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명 (RENAME=(기존변수명1=새로운변수명1 기존변수명2=새로운변수명2 ...));
RUN;</code></pre>
<p>KEEP, DROP 문과 마찬가지로 SET 문 다음에 RENAME 문을 사용할 수 있다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명;
RENAME 기존변수명1=새로운변수명1 기존변수명2=새로운변수명2 ...;
RUN;</code></pre>
<p>BB.T20 데이터셋에서 개인고유번호(RN_INDI)를 PERSON_ID로, 청구고유번호(RN_KEY)를 MID, 심결요양급여비용총액(ED_RC_TOT_AMT)를 COST로 변경하여 BB 라이브러리에 T20_RENAME 데이터셋을 생성시켜보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_rename;
set bb.t20 (rename=(rn_indi=person_id rn_key=mid ed_rc_tot_amt=cost));
run;

data bb.t20_rename;
set bb.t20;
rename rn_indi=person_id rn_key=mid ed_rc_tot_amt=cost;
run;

proc print data=bb.t20_rename (obs=10);
var person_id mid cost;
format mid 15.;
run;</code></pre>
<p><img src="fig3/f4.png" /></p>
<p>PROC PRINT 문에서 (OBS=숫자) 옵션을 주면 정해진 숫자만큼의 행만 출력하게 된다. 여기서는 (OBS=10)으로 지정했기 때문에 10개의 행만 출력을 해준다. 또한, 원하는 변수만 출력하길 원하면 VAR 명령문을 추가하면 된다. 여기서는 [VAR PERSON_ID MID COST;] 문을 추가하여 PERSON_ID, MID, COST 세 개의 변수만 출력하였다. FORMAT 문은 PROC step에서 사용해도 동일한 효과를 준다는 것을 알 수 있다.</p>
<p>SAS는 하나의 DATA step 문에서 여러 명령어를 지정할 수 있다. 일반적으로 명령문이 작성된 순서대로 실행을 하나, RENAME 문은 작성 순서에 상관없이 제일 마지막에 실행된다. 다음 프로그램을 살펴보자.</p>
<pre><code>data bb.t20_rename2;
set bb.t20;
keep rn_indi rn_key ed_rc_tot_amt;
rename rn_indi=person_id rn_key=mid ed_rc_tot_amt=cost;
run;</code></pre>
<p><img src="fig3/f5.png" /></p>
<p>위의 프로그램은 개인고유번호(RN_INDI)를 PERSON_ID로, 청구고유번호(RN_KEY)를 MID, 심결요양급여비용총액(ED_RC_TOT_AMT)를 COST로 변경하고 PERSON_ID, MID, COST 세 변수만 남겨서 BB.T20_RENAME 데이터셋을 생성시키는 명령문이다. 프로그램 실행 후 프로그램이 제대로 작동을 했는지 또는 결과 데이터셋의 크기나 수행시간 등이 로그창에 출력된다. 로그창을 살펴보면 “데이터셋 BB.T20_RENAME2는 135524개의 관측치와 0개의 변수를 가지고 있습니다.”라는 문구를 보여준다. 즉, 새로 생성된 데이터셋에 변수가 하나도 들어가 있지 않음을 의미한다. 프로그램에서 RENAME 명령문이 KEEP 명령어보다 먼저 작성되었지만, KEEP 문이 먼저 실행되고 RENAME이 나중에 실행되기 때문에 이와 같은 문제가 발생한다. 다음 프로그램을 통해 KEEP(또는 DROP)과 RENAME의 실행순서에 대해 이해해보자.</p>
<pre><code>data bb.t20_rename3;
set bb.t20;
keep rn_indi rn_key ed_rc_tot_amt;
rename rn_indi=person_id rn_key=mid ed_rc_tot_amt=cost;
run;

proc print data=bb.t20_rename3 (obs=10);
format mid 15.;
run;</code></pre>
<p>위의 프로그램은 RN_INDI, RN_KEY, ED_RC_TOT_AMT 세 개의 변수만 남겨서 BB.T20_RENAME3 데이터셋을 생성하고 이때 새로 생성되는 데이터셋에는 RN_INDI, RN_KEY, ED_RC_TOT_AMT 변수 대신 PERSON_ID, MID, COST로 이름을 변경하라는 의미를 지닌다.</p>
<p><img src="fig3/f6.png" /></p>
<p><img src="fig3/f7.png" /></p>
<p>로그창을 살펴보면 3개의 변수가 남겨졌음을 알 수 있으며, 결과창을 살펴보면 원래 변수 이름이 아니라 변경된 변수 이름으로 저장된 것을 알 수 있다.</p>
</div>
<div id="특정-관찰값부터-시작하여-데이터셋-만들기" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> 특정 관찰값부터 시작하여 데이터셋 만들기</h2>
<p>데이터셋을 생성할 때 전체 행이 아닌 특정 행부터 데이터를 불러들이고 싶을 땐 FIRSTOBS 문을 사용한다. FIRSTOBS 문을 사용하는 방법은 다음과 같다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명 (FIRSTOBS=숫자);
RUN;</code></pre>
<p>SET 문의 옵션으로 (FIRSTOBS=숫자)를 기입하면 지정된 숫자에 해당하는 행부터 그 후의 모든 행을 불러들이게 된다. 따라서 지정된 행 이전의 자료가 필요없을 때 FIRSTOBS 문을 사용하면 간단하게 해결된다.</p>
<p>T20 데이터셋은 12,482개의 행으로 구성되어 있다. 이 중에서 1번부터 10,000번 행까지 데이터는 무시하고 10,001번 행부터 12,482번 행까지 데이터를 불러와서 T20_FIRSTOBS 데이터셋을 생성하는 경우를 생각해보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_firstobs;
set bb.t20 (firstobs=10001);
run;

proc print data=bb.t20_firstobs (obs=10); run;</code></pre>
<p><img src="fig3/f8.png" /></p>
<p>이번에는 FIRSTOBS와 반대로 1번 행부터 원하는 행까지 자료를 불러들이는 경우를 생각해보자. 이때 사용하는 명령문이 OBS이며, 사용법은 다음과 같다.</p>
<pre><code>DATA 라이브러리.데이터셋명;
SET 라이브러리.기존데이터셋명 (OBS=숫자);
RUN;</code></pre>
<p>SET 문의 옵션으로 (OBS=숫자)를 기입하면 1번 행부터 지정된 숫자에 해당하는 행까지 데이터를 불러들이게 된다. 따라서 지정된 행 이후의 자료가 필요없을 때 OBS 문을 사용하면 간단하게 해결된다. T20 데이터셋에서 1,000번째 행까지 자료를 불러들여 T20_OBS 데이터셋을 생성하는 경우를 생각해보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_obs;
set bb.t20 (obs=1000);
run;

proc print data=bb.t20_obs (obs=10); run;</code></pre>
<p><img src="fig3/f9.png" /></p>
<p>FIRSTOBS와 OBS 명령문을 동시에 사용하면 원하는 시작 위치부터 원하는 마지막 위치까지 지정할 수 있다. 즉, FIRSTOBS에서 지정된 값이 시작 행이 되고 OBS에서 지정된 값이 마지막 행이 된다. T20 데이터셋에서 1,001번 행부터 2,000번 행까지 1,000개의 행만 추출하여 T20_OBS2 데이터셋을 생성하는 경우를 생각해보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_obs2;
set bb.t20 (firstobs=1001 obs=2000);
run;

proc print data=bb.t20_obs2 (obs=10); run;</code></pre>
<p><img src="fig3/f10.png" /></p>
</div>
<div id="기존-데이터셋으로-다수의-새로운-데이터셋-만들기" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> 기존 데이터셋으로 다수의 새로운 데이터셋 만들기</h2>
<p>이미 생성된 하나의 데이터셋으로부터 하나 이상의 데이터셋을 새로이 만들고자 할 경우에 DATA 문에서 여러 개의 새로운 데이터셋 명을 지정하면 여러 데이터셋이 동시에 생성된다. 여기서는 앞서 공부한 KEEP, DROP, RENAME 문을 이용하여 여러 데이터셋을 동시에 생성하는 방법을 살펴보자. 프로그램은 다음과 같다.</p>
<pre><code>data bb.t40_keep2 (keep=rn_indi rn_key mcex_sick_sym)
bb.t40_drop2 (drop=mdcare_strt_dt form_cd detail_tmsg_subj_cd sick_clsf_type std_yyyy rename=(rn_indi=person_id rn_key=mid mcex_sick_sym=sick));
set bb.t40;
run;

proc print data=bb.t40_keep2 (obs=10);run;
proc print data=bb.t40_drop2 (obs=10);run;</code></pre>
<p><img src="fig3/f11.png" /></p>
<p>위의 프로그램은 BB 라이브러리의 T40 데이터셋으로부터 개인고유번호(RN_INDI), 청구고유번호(RN_KEY), 요양급여상병기호(MCEX_SICK_SYM) 세 변수만 남겨서 BB.T40_KEEP2 데이터셋을 구성하고 동시에 T40 데이터셋으로부터 요양개시일자(MDCARE_STRT_DT), 서식코드(FORM_CD), 세부전문과목코드(DETAIL_TMSG_SUBJ_CD), 상병분류코드(SICK_CLSF_TYPE), 기준년도(STD_YYYY) 변수를 제거하고 개인고유번호(RN_INDI), 청구고유번호(RN_KEY), 요양급여상병기호(MCEX_SICK_SYM)를 각각 PERSON_ID, MID, SICK으로 변수 이름을 변경하여 BB.T40_DROP2 데이터셋을 생성하는 의미를 지닌다. 두 데이터셋은 하나의 DATA step에서 동시에 생성되며, 변수 이름만 바뀔 뿐 동일한 데이터 값을 가지고 있다.</p>
<!----------------------------------------- End-------------------->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter4.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["SASclaims.pdf", "SASclaims.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
