<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 반복문 | Insurance Claims Data Analysis with SAS</title>
  <meta name="description" content="This is a SAS manual for analysis of insurance claims data" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 반복문 | Insurance Claims Data Analysis with SAS" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a SAS manual for analysis of insurance claims data" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 반복문 | Insurance Claims Data Analysis with SAS" />
  
  <meta name="twitter:description" content="This is a SAS manual for analysis of insurance claims data" />
  

<meta name="author" content="Jin Hyun Nam" />


<meta name="date" content="2021-12-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter6.html"/>
<link rel="next" href="chapter8.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Claims Data Analysis with SAS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>머리말</a></li>
<li class="chapter" data-level="1" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i><b>1</b> SAS 개요</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter1.html"><a href="chapter1.html#sas"><i class="fa fa-check"></i><b>1.1</b> SAS?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="chapter1.html"><a href="chapter1.html#sas-프로그램-구성"><i class="fa fa-check"></i><b>1.1.1</b> SAS 프로그램 구성</a></li>
<li class="chapter" data-level="1.1.2" data-path="chapter1.html"><a href="chapter1.html#sas-프로그램-장점"><i class="fa fa-check"></i><b>1.1.2</b> SAS 프로그램 장점</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="chapter1.html"><a href="chapter1.html#sas-구성요소"><i class="fa fa-check"></i><b>1.2</b> SAS 구성요소</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chapter1.html"><a href="chapter1.html#sas-화면구성"><i class="fa fa-check"></i><b>1.2.1</b> SAS 화면구성</a></li>
<li class="chapter" data-level="1.2.2" data-path="chapter1.html"><a href="chapter1.html#메뉴"><i class="fa fa-check"></i><b>1.2.2</b> 메뉴</a></li>
<li class="chapter" data-level="1.2.3" data-path="chapter1.html"><a href="chapter1.html#도구-모음"><i class="fa fa-check"></i><b>1.2.3</b> 도구 모음</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chapter1.html"><a href="chapter1.html#sas-기본-형식"><i class="fa fa-check"></i><b>1.3</b> SAS 기본 형식</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter2.html"><a href="chapter2.html"><i class="fa fa-check"></i><b>2</b> 자료의 입출력</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapter2.html"><a href="chapter2.html#자료의-입력"><i class="fa fa-check"></i><b>2.1</b> 자료의 입력</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chapter2.html"><a href="chapter2.html#cards문-이용"><i class="fa fa-check"></i><b>2.1.1</b> CARDS문 이용</a></li>
<li class="chapter" data-level="2.1.2" data-path="chapter2.html"><a href="chapter2.html#infile-구문-이용"><i class="fa fa-check"></i><b>2.1.2</b> INFILE 구문 이용</a></li>
<li class="chapter" data-level="2.1.3" data-path="chapter2.html"><a href="chapter2.html#위저드wizard-이용"><i class="fa fa-check"></i><b>2.1.3</b> 위저드(Wizard) 이용</a></li>
<li class="chapter" data-level="2.1.4" data-path="chapter2.html"><a href="chapter2.html#proc-import-이용"><i class="fa fa-check"></i><b>2.1.4</b> PROC IMPORT 이용</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chapter2.html"><a href="chapter2.html#자료의-출력"><i class="fa fa-check"></i><b>2.2</b> 자료의 출력</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chapter2.html"><a href="chapter2.html#위저드-이용"><i class="fa fa-check"></i><b>2.2.1</b> 위저드 이용</a></li>
<li class="chapter" data-level="2.2.2" data-path="chapter2.html"><a href="chapter2.html#proc-export-이용"><i class="fa fa-check"></i><b>2.2.2</b> PROC EXPORT 이용</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chapter2.html"><a href="chapter2.html#공단-표본코호트-자료-불러오기"><i class="fa fa-check"></i><b>2.3</b> 공단 표본코호트 자료 불러오기</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chapter2.html"><a href="chapter2.html#자격-db-자격-및-보험료테이블"><i class="fa fa-check"></i><b>2.3.1</b> 자격 DB – 자격 및 보험료테이블</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter2.html"><a href="chapter2.html#사망-db-출생-및-사망테이블"><i class="fa fa-check"></i><b>2.3.2</b> 사망 DB – 출생 및 사망테이블</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter2.html"><a href="chapter2.html#table-20---진료-db-명세서"><i class="fa fa-check"></i><b>2.3.3</b> Table 20 - 진료 DB 명세서</a></li>
<li class="chapter" data-level="2.3.4" data-path="chapter2.html"><a href="chapter2.html#table-30-진료-db-진료내역"><i class="fa fa-check"></i><b>2.3.4</b> Table 30 – 진료 DB 진료내역</a></li>
<li class="chapter" data-level="2.3.5" data-path="chapter2.html"><a href="chapter2.html#table-40-진료-db-상병내역"><i class="fa fa-check"></i><b>2.3.5</b> Table 40 – 진료 DB 상병내역</a></li>
<li class="chapter" data-level="2.3.6" data-path="chapter2.html"><a href="chapter2.html#table-60-진료-db-처방전교부-상세내역"><i class="fa fa-check"></i><b>2.3.6</b> Table 60 – 진료 DB 처방전교부 상세내역</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter3.html"><a href="chapter3.html"><i class="fa fa-check"></i><b>3</b> Set문 활용</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter3.html"><a href="chapter3.html#변수에-이름-붙이기"><i class="fa fa-check"></i><b>3.1</b> 변수에 이름 붙이기</a></li>
<li class="chapter" data-level="3.2" data-path="chapter3.html"><a href="chapter3.html#특정-변수를-취하여-새로운-데이터셋-만들기"><i class="fa fa-check"></i><b>3.2</b> 특정 변수를 취하여 새로운 데이터셋 만들기</a></li>
<li class="chapter" data-level="3.3" data-path="chapter3.html"><a href="chapter3.html#특정-변수를-제외하고-새로운-데이터셋-만들기"><i class="fa fa-check"></i><b>3.3</b> 특정 변수를 제외하고 새로운 데이터셋 만들기</a></li>
<li class="chapter" data-level="3.4" data-path="chapter3.html"><a href="chapter3.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>3.4</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="3.5" data-path="chapter3.html"><a href="chapter3.html#특정-관찰값부터-시작하여-데이터셋-만들기"><i class="fa fa-check"></i><b>3.5</b> 특정 관찰값부터 시작하여 데이터셋 만들기</a></li>
<li class="chapter" data-level="3.6" data-path="chapter3.html"><a href="chapter3.html#기존-데이터셋으로-다수의-새로운-데이터셋-만들기"><i class="fa fa-check"></i><b>3.6</b> 기존 데이터셋으로 다수의 새로운 데이터셋 만들기</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter4.html"><a href="chapter4.html"><i class="fa fa-check"></i><b>4</b> 새로운 변수 생성</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter4.html"><a href="chapter4.html#기존-변수의-값-바꾸기"><i class="fa fa-check"></i><b>4.1</b> 기존 변수의 값 바꾸기</a></li>
<li class="chapter" data-level="4.2" data-path="chapter4.html"><a href="chapter4.html#새로운-변수-만들기"><i class="fa fa-check"></i><b>4.2</b> 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.3" data-path="chapter4.html"><a href="chapter4.html#round-함수를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.3</b> ROUND 함수를 이용한 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.4" data-path="chapter4.html"><a href="chapter4.html#숫자-변수를-문자-변수로-문자-변수를-숫자-변수로"><i class="fa fa-check"></i><b>4.4</b> 숫자 변수를 문자 변수로, 문자 변수를 숫자 변수로</a></li>
<li class="chapter" data-level="4.5" data-path="chapter4.html"><a href="chapter4.html#substr-함수를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.5</b> Substr 함수를 이용한 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.6" data-path="chapter4.html"><a href="chapter4.html#날짜-함수를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.6</b> 날짜 함수를 이용한 새로운 변수 만들기</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="chapter4.html"><a href="chapter4.html#날짜-변수의-생성"><i class="fa fa-check"></i><b>4.6.1</b> 날짜 변수의 생성</a></li>
<li class="chapter" data-level="4.6.2" data-path="chapter4.html"><a href="chapter4.html#날짜-계산"><i class="fa fa-check"></i><b>4.6.2</b> 날짜 계산</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="chapter4.html"><a href="chapter4.html#누적값을-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.7</b> 누적값을 이용한 새로운 변수 만들기</a></li>
<li class="chapter" data-level="4.8" data-path="chapter4.html"><a href="chapter4.html#lag과-dif를-이용한-새로운-변수-만들기"><i class="fa fa-check"></i><b>4.8</b> Lag과 Dif를 이용한 새로운 변수 만들기</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter5.html"><a href="chapter5.html"><i class="fa fa-check"></i><b>5</b> 조건문</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter5.html"><a href="chapter5.html#특정-조건을-만족하는-관찰값-선택하기"><i class="fa fa-check"></i><b>5.1</b> 특정 조건을 만족하는 관찰값 선택하기</a></li>
<li class="chapter" data-level="5.2" data-path="chapter5.html"><a href="chapter5.html#특정-조건을-만족하는-관찰값-삭제하기"><i class="fa fa-check"></i><b>5.2</b> 특정 조건을 만족하는 관찰값 삭제하기</a></li>
<li class="chapter" data-level="5.3" data-path="chapter5.html"><a href="chapter5.html#조건문-활용하기"><i class="fa fa-check"></i><b>5.3</b> 조건문 활용하기</a></li>
<li class="chapter" data-level="5.4" data-path="chapter5.html"><a href="chapter5.html#조건문-확장하기"><i class="fa fa-check"></i><b>5.4</b> 조건문 확장하기</a></li>
<li class="chapter" data-level="5.5" data-path="chapter5.html"><a href="chapter5.html#조건문-일반화하기"><i class="fa fa-check"></i><b>5.5</b> 조건문 일반화하기</a></li>
<li class="chapter" data-level="5.6" data-path="chapter5.html"><a href="chapter5.html#output문을-이용한-여러-데이터셋-생성하기"><i class="fa fa-check"></i><b>5.6</b> Output문을 이용한 여러 데이터셋 생성하기</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chapter6.html"><a href="chapter6.html"><i class="fa fa-check"></i><b>6</b> 자료의 정렬</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chapter6.html"><a href="chapter6.html#하나의-변수에-의한-관찰값의-정렬"><i class="fa fa-check"></i><b>6.1</b> 하나의 변수에 의한 관찰값의 정렬</a></li>
<li class="chapter" data-level="6.2" data-path="chapter6.html"><a href="chapter6.html#여러-개의-변수에-의한-관찰값의-정렬"><i class="fa fa-check"></i><b>6.2</b> 여러 개의 변수에 의한 관찰값의 정렬</a></li>
<li class="chapter" data-level="6.3" data-path="chapter6.html"><a href="chapter6.html#first-변수와-last-변수-사용하기"><i class="fa fa-check"></i><b>6.3</b> First 변수와 Last 변수 사용하기</a></li>
<li class="chapter" data-level="6.4" data-path="chapter6.html"><a href="chapter6.html#동일한-관찰값의-제거"><i class="fa fa-check"></i><b>6.4</b> 동일한 관찰값의 제거</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapter7.html"><a href="chapter7.html"><i class="fa fa-check"></i><b>7</b> 반복문</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chapter7.html"><a href="chapter7.html#단순-do문"><i class="fa fa-check"></i><b>7.1</b> 단순 DO문</a></li>
<li class="chapter" data-level="7.2" data-path="chapter7.html"><a href="chapter7.html#반복-do문"><i class="fa fa-check"></i><b>7.2</b> 반복 DO문</a></li>
<li class="chapter" data-level="7.3" data-path="chapter7.html"><a href="chapter7.html#다중-반복-do문"><i class="fa fa-check"></i><b>7.3</b> 다중 반복 DO문</a></li>
<li class="chapter" data-level="7.4" data-path="chapter7.html"><a href="chapter7.html#array문의-활용"><i class="fa fa-check"></i><b>7.4</b> ARRAY문의 활용</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chapter8.html"><a href="chapter8.html"><i class="fa fa-check"></i><b>8</b> 데이터셋 합치기</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chapter8.html"><a href="chapter8.html#set문을-이용한-데이터셋-합치기"><i class="fa fa-check"></i><b>8.1</b> SET문을 이용한 데이터셋 합치기</a></li>
<li class="chapter" data-level="8.2" data-path="chapter8.html"><a href="chapter8.html#merge문을-이용한-데이터셋-합치기"><i class="fa fa-check"></i><b>8.2</b> MERGE문을 이용한 데이터셋 합치기</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chapter9.html"><a href="chapter9.html"><i class="fa fa-check"></i><b>9</b> SQL과 MACRO</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chapter9.html"><a href="chapter9.html#proc-sql-기본-구조"><i class="fa fa-check"></i><b>9.1</b> PROC SQL 기본 구조</a></li>
<li class="chapter" data-level="9.2" data-path="chapter9.html"><a href="chapter9.html#단일-데이터셋-다루기"><i class="fa fa-check"></i><b>9.2</b> 단일 데이터셋 다루기</a></li>
<li class="chapter" data-level="9.3" data-path="chapter9.html"><a href="chapter9.html#여러-데이터셋-다루기"><i class="fa fa-check"></i><b>9.3</b> 여러 데이터셋 다루기</a></li>
<li class="chapter" data-level="9.4" data-path="chapter9.html"><a href="chapter9.html#macro"><i class="fa fa-check"></i><b>9.4</b> MACRO</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chapter10.html"><a href="chapter10.html"><i class="fa fa-check"></i><b>10</b> Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#arithmetic-functions"><i class="fa fa-check"></i>Arithmetic Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#character-functions"><i class="fa fa-check"></i>Character Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#date-and-time-functions"><i class="fa fa-check"></i>Date and Time Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#mathematical-functions"><i class="fa fa-check"></i>Mathematical Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#noncentrality-functions"><i class="fa fa-check"></i>Noncentrality Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#probability-and-density-functions"><i class="fa fa-check"></i>Probability and Density Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#quantile-functions"><i class="fa fa-check"></i>Quantile Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#sample-statistics-functions"><i class="fa fa-check"></i>Sample Statistics Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#state-and-zip-code-functions"><i class="fa fa-check"></i>State and ZIP Code Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#trigonometric-and-hyperbolic-functions"><i class="fa fa-check"></i>Trigonometric and Hyperbolic Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#truncation-functions"><i class="fa fa-check"></i>Truncation Functions</a></li>
<li class="chapter" data-level="" data-path="chapter10.html"><a href="chapter10.html#variable-information-functions"><i class="fa fa-check"></i>Variable Information Functions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Insurance Claims Data Analysis with SAS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter7" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> 반복문</h1>
<p>동일한 작업에 대한 반복 처리를 위해서 SAS에서는 DO 문을 사용하며 DO 문은 END 문과 짝을 이루어 사용된다. 즉, DO 문은 END 문이 나올 때까지 DO와 END 사이에 있는 명령문들을 반복적으로 시행한다. DO 문에는 단순 DO 문, 반복을 표시하는 DO 문, DO WHILE 문 그리고 DO UNTIL 문 등이 있다. 또한 ARRAY 문과 결합하여 동일한 작업을 반복할 경우 반복 작업의 간소화가 가능하다.</p>
<div id="단순-do문" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> 단순 DO문</h2>
<p>단순 DO 문은 조건문과 결합하여 사용되며, 특정 조건을 만족하는 경우 그 조건에서 여러 명령어를 시행해야 하는 경우 사용된다. 조건문과 같이 사용하기 때문에 형태는 IF ~ THEN DO; ~ END;와 같이 나타나며 사용방법은 다음과 같다.</p>
<pre><code>IF 조건문1 THEN DO;
실행문1;
실행문2;
...
END;
ELSE DO;
실행문 ... ;
END;
또는 ELSE IF 조건문2 THEN DO; 실행문... END;</code></pre>
<p>BB.T20 데이터셋에서 기준연도(STD_YYYY)가 ‘2002’년일 때 심결요양급여비용총액(ED_RC_TOT_AMT)에 1000을 더해 totalcost 변수를 생성하고, 동일 조건에 만약 심결본인부담금(EDC_SBA)이 3000보다 크다면 0원으로 대체하여 EDC_SBA2 변수를 생성해보자. 또한 기준연도(STD_YYYY)가 ‘2003’년일 때 심결요양급여비용총액(ED_RC_TOT_AMT)에 2000을 더해 totalcost 변수를 생성하고, 동일 조건에 만약 심결본인부담금(EDC_SBA)이 3000보다 크다면 2000원으로 대체하여 EDC_SBA2 변수를 생성해보자. 즉, STD_YYYY가 ‘2002’ 일 때 두 가지 작업을 시행하고 마찬가지로 STD_YYYY가 ‘2003’ 일 때도 두 가지 작업을 시행한다. 이를 위한 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_do;
set bb.t20;
if std_yyyy=&#39;2002&#39; then do;
totalcost = ed_rc_tot_amt + 1000;
if edc_sba &gt; 3000 then edc_sba2 = 0;
end;
else if std_yyyy=&#39;2003&#39; then do;
totalcost = ed_rc_tot_amt + 2000;
if edc_sba &gt; 3000 then edc_sba2 = 2000;
end;
keep ed_rc_tot_amt std_yyyy totalcost edc_sba edc_sba2;
run;

proc print data=bb.t20_do (obs=10);
where std_yyyy=&#39;2002&#39;;
run;

proc print data=bb.t20_do (obs=10);
where std_yyyy=&#39;2003&#39;;
run;</code></pre>
<p><img src="fig7/f1.png" /></p>
<p><img src="fig7/f2.png" /></p>
<p>PRINT PROCEDURE에서 WHERE 문을 사용하면 조건문을 사용한 것과 같은 기능을 한다. 이는 PROC step 뿐만 아니라 DATA step에서도 사용 가능하다. 즉, DATA step에서 간단한 IF 문 대신에 WHERE 문으로 사용해도 무방하다.</p>
</div>
<div id="반복-do문" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> 반복 DO문</h2>
<p>반복 DO 문은 DO 문안에 색인을 나타내는 색인(index) 변수를 지정하고, 색인 변수의 값을 증가시켜 색인 변수의 최종 값과 일치하면 반복을 중지한다. 증가 값은 기본적으로 1이지만 BY에 의해 증가 값을 지정할 수도 있다.</p>
<pre><code>DO I=A TO B BY=C;
실행문;
END;  </code></pre>
<p>여기서 I는 색인을 나타내는 임의의 문자이며, 원하는 대로 바꾸어서 사용 가능하다. 다만, 색인 문자 뒤에 나타나는 A와 B는 각각 시작 숫자와 끝 숫자를 의미하며 C는 A부터 B까지 변할 때 증가되는 크기를 의미한다.. 예를 들어 [I=1 to 3 BY=1;]로 지정하면 I는 1, 2, 3의 값을 가지게 되며, I가 가지는 각각의 숫자마다 DO와 END 사이의 실행문을 반복해서 시행한다.</p>
<p>BB.T20 데이터셋에서 2002년부터 연도별로 심결요양급여비용총액(ED_RC_TOT_AMT)이 1000원씩 누적된다고 가정해보자. 즉, 2002년은 심결요양급여비용총액+1000, 2003년에는 심결요양급여비용총액+2000, 2004년에는 심결요양급여비용총액+3000 과 같이 2015년까지 매년 1000씩 누적시켜 TOTALCOST 변수를 생성시켜보자. 이를 위한 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_do2;
set bb.t20;
year = std_yyyy*1;

do i=2002 to 2015;
if year = i then totalcost = ed_rc_tot_amt + (i-2001)*1000;
end;

keep year ed_rc_tot_amt totalcost;
run;

proc print data=bb.t20_do2 (obs=10); where year=2002; run;
proc print data=bb.t20_do2 (obs=10); where year=2015; run;</code></pre>
<p><img src="fig7/f3.png" /></p>
<p><img src="fig7/f4.png" /></p>
<p>여기서 i는 2002부터 2015까지 1단위로 증가하면서 값이 바뀌며(BY=1 생략가능), 2002부터 2015까지의 크기인 14만큼 반복 수행하게 된다. 이때 조건이 YEAR=i이면, 즉, YEAR이 2002, 2003, …, 2015이면, 각 해당 연도에 TOTALCOST는 심결요양급여비용총액에 (I-2001)*1000 만큼 증가한 값이 저장된다. 즉, I=2002이면 1000, 2003이면 2000, …, 2015이면 14000 만큼 증가한다.</p>
</div>
<div id="다중-반복-do문" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> 다중 반복 DO문</h2>
<p>단순 DO 문에서 IF 문을 중첩해서 사용하듯 반복 DO 문도 중첩해서 사용 가능하며 사용 방법은 다음과 같다.</p>
<pre><code>DO I=A TO B;
DO J=C TO D;
실행문;
END; END; </code></pre>
<p>여기서 A와 B는 첫 번째 반복의 시작과 끝을 나타내는 수이며, C와 D는 두 번째 반복의 시작과 끝을 나타내는 수이다. 이때 반복 순서는 첫 번째 반복인 I가 A일때 J가 C부터 D까지 반복이 일어나며, 이러한 반복은 I의 값이 B에 이를 때까지 계속된다. 또한 DO 문은 END 문과 짝을 지어 이루어지기 때문에 두 개 이상의 DO 문을 사용하면 DO 문의 개수만큼 END 문을 사용해야 한다.</p>
<pre><code>data bb.t20_doubledo;
set bb.t20;
year = substr(mdcare_strt_dt,1,4)*1;
month = substr(mdcare_strt_dt,5,2)*1;

do i = 2002 to 2015;
do j = 1 to 12 ;
if year = i and month = j then yymm = trim(i) || &#39; - &#39; || trim(j);
end;
end;
run;

proc print data=bb.t20_doubledo (obs=10);
var rn_indi year month yymm;
run;</code></pre>
<p><img src="fig7/f5.png" /></p>
<p>I는 2002부터 2015까지 1단위로 증가하면서 값이 바뀌며, 2002부터 2015까지의 크기인 14만큼 반복 수행하게 된다. J는 1부터 12까지 1단위로 증가하면서 값이 바뀌며, 12만큼 반복수행 하게 된다. 이때 반복수행 순서는 I의 값이 바뀔 때마다 J는 전체 반복을 한다. 즉, I=2002일 때 J는 1부터 12까지 반복하며 다시 I=2003일 때 J는 1부터 12까지 반복한다. 다시 말해서 반복 순서는 바깥쪽에서부터 색인의 값이 하나씩 결정되며 제일 안쪽에 있는 DO 문은 전체를 반복한다. 안쪽의 DO 문이 끝나면 바깥쪽으로 순서대로 DO 문을 끝낸다. 프로그램에서 TRIM 함수는 값 뒤의 공백을 없애주는 함수이며, 기호 ‘||’는 문자열을 결합할 때 사용하는 기호이다. 따라서 [IF YEAR=I AND MONTH=J THEN YYMM=TRIM(I)||’ - ‘||TRIM(J);]는 YEAR=I이고 MONTH=J일 때 YYMM 변수는 ’I – J’ 값을 가지게 된다. 예를 들어, I=2002, MONTH=12이면, YYMM 변수는 ‘2002 – 12’ 라는 값을 가지게 되며 이러한 과정을 2002부터 2015까지, 1월부터 12월까지 모든 조합으로 조건을 검색하여 YYMM 변수를 생성한다.</p>
</div>
<div id="array문의-활용" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> ARRAY문의 활용</h2>
<p>2개 이상의 변수에 대해 동일한 처리를 할 경우 DO문과 ARRAY문을 사용하여 간편하게 사용 가능하며 사용 방법은 다음과 같다.</p>
<pre><code>ARRAY 이름{변수개수} 변수1 변수2...;
DO I = 1 TO 변수개수;
실행문;
END;</code></pre>
<p>여기서 이름은 임의의 ARRAY 명을 의미하며, ARRAY 명 다음에는 ARRAY에 나열될 변수의 개수를 중괄호({ }) 안에 기입한다. 그 후 각각의 변수명을 나열한다.</p>
<p>예를 들어, BB.T20 데이터셋에서 심결요양급여비용총액(ED_RC_TOT_AMT), 심결본인부담금(EDC_SBA), 심결보험자부담금(EDC_INSUR_BRDN_AMT)에 결측값이 존재한다고 가정하자. 이때 각 변수의 결측값을 0으로 대체하고자 한다. 이를 위해 조건문을 이용해 각각의 변수가 결측일 때 0의 값으로 대체할 수도 있으나, 동일한 실행과정에 변수명만 바뀌는 경우이기 때문에 DO-ARRAY 문을 이용하면 쉽게 해결된다. 특히 동일한 작업을 많은 변수에 시행해야 하는 경우에 매우 유용하다. 이를 위한 프로그램은 다음과 같다.</p>
<pre><code>data bb.t20_array;
set bb.t20;
if ed_rc_tot_amt=0 then ed_rc_tot_amt=.;
if edc_sba=0 then edc_sba=.;
if edc_insur_brdn_amt=0 then edc_insur_brdn_amt=.;
keep ed_rc_tot_amt edc_sba edc_insur_brdn_amt;
run;

proc sort data=bb.t20_array; by ed_rc_tot_amt; run;
proc print data=bb.t20_array (obs=10); run;

data bb.t20_array1;
set bb.t20_array;
array alist{3} ed_rc_tot_amt edc_sba edc_insur_brdn_amt;
do j=1 to 3;
if alist{j}=. then alist{j}=0 ;
end;
drop j;
run;

proc print data=bb.t20_array1 (obs=10); run;</code></pre>
<p>여기서 ALIST는 임의의 이름이며 사용자 편의대로 지정 가능하다. 다만, ARRAY 문에서 ALIST는 지정되는 변수의 개수(여기서는 ED_RC_TOT_AMT, EDC_SBA, EDC_INSUR_BRDN_AMT 3개)가 ALIST 다음 중괄호 안에 정확히 지정되어야 한다. 또한, 지정된 ARRAY를 반복 구문에서 사용할 때는 ALIST{지정번호}를 이용한다. 예를 들어, ALIST{1}은 ARRAY의 첫 번째 변수 ED_RC_TOT_AMT를 의미하고, ALIST{2}는 두 번째 변수 EDC_SBA를 의미한다. 따라서 ARRAY 문의 ALIST{변수개수}와 반복 구문의 ALIST{지정번호}는 형태는 같으나 의미가 다르므로 구분해서 사용해야 한다.</p>
<p><img src="fig7/f6.png" /></p>
<!----------------------------------------- End-------------------->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter6.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter8.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["SASclaims.pdf", "SASclaims.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
